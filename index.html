<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Thi·ªáp C∆∞·ªõi - ƒê√¥ng & Uy√™n</title>
    <meta
      content="Thi·ªáp c∆∞·ªõi ƒëi·ªán t·ª≠ c·ªßa Ho√†ng Uy√™n v√† Vi·∫øt ƒê√¥ng - 28-29/12/2025"
      name="description"
    />
    <meta
      content="thi·ªáp c∆∞·ªõi, wedding invitation, Ho√†ng Uy√™n, Vi·∫øt ƒê√¥ng"
      name="keywords"
    />
    <meta content="Thi·ªáp C∆∞·ªõi - ƒê√¥ng & Uy√™n" property="og:title" />
    <meta
      content="Ch√∫ng t√¥i s·∫Øp k·∫øt h√¥n! Tr√¢n tr·ªçng k√≠nh m·ªùi b·∫°n tham d·ª± l·ªÖ c∆∞·ªõi c·ªßa ch√∫ng t√¥i."
      property="og:description"
    />
    <meta content="website" property="og:type" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500&family=Great+Vibes&family=Comforter+Brush&display=swap");

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* Performance optimizations */
      .invitation-container,
      .hero-section,
      .countdown-box,
      .family-side,
      .ceremony-item {
        will-change: transform;
      }

      .petal,
      .floating-heart,
      .leaf {
        will-change: transform, opacity;
        contain: layout style paint;
      }

      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(
          135deg,
          #f8f9fa 0%,
          #e9ecef 50%,
          #dee2e6 100%
        );
        background-size: 400% 400%;
        animation: gradientShift 50s ease infinite;
        min-height: 100vh;
        overflow-x: hidden;
        scroll-behavior: smooth;
        position: relative;
      }

      /* Enhanced background shadow images */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("img/1.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        opacity: 0.06;
        z-index: -3;
        filter: blur(2px) sepia(20%) hue-rotate(10deg) brightness(1.1);
        animation: backgroundFloat 60s ease-in-out infinite;
      }

      body::after {
        content: "";
        position: fixed;
        bottom: 0;
        right: 0;
        width: 70%;
        height: 60%;
        background-image: url("img/2.jpg");
        background-size: cover;
        background-position: bottom right;
        background-repeat: no-repeat;
        opacity: 0.04;
        z-index: -2;
        filter: blur(1.5px) sepia(15%) brightness(1.2);
        animation: backgroundFloat 70s ease-in-out infinite reverse;
      }

      @keyframes backgroundFloat {
        0%,
        100% {
          transform: translateY(0px) scale(1);
          opacity: 0.08;
        }
        25% {
          transform: translateY(-10px) scale(1.02);
          opacity: 0.06;
        }
        50% {
          transform: translateY(0px) scale(1);
          opacity: 0.08;
        }
        75% {
          transform: translateY(10px) scale(0.98);
          opacity: 0.05;
        }
      }

      /* Wedding Gate Animation */
      .wedding-gate-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 10000;
        pointer-events: none;
        opacity: 1;
        transition: opacity 0.5s ease 3s;
      }

      .wedding-gate-overlay.hidden {
        opacity: 0;
        pointer-events: none;
      }

      .gate-container {
        position: relative;
        width: 100%;
        height: 100%;
        perspective: 1000px;
      }

      .gate-door {
        position: absolute;
        top: 0;
        width: 50%;
        height: 100%;
        background: linear-gradient(
            135deg,
            rgba(139, 69, 19, 0.15) 0%,
            rgba(160, 82, 45, 0.1) 25%,
            rgba(180, 100, 60, 0.12) 50%,
            rgba(160, 82, 45, 0.1) 75%,
            rgba(139, 69, 19, 0.15) 100%
          ),
          url("img/wall.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        border: 1px solid rgba(101, 67, 33, 0.8);
        border-radius: 8px;
        box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.1),
          inset 0 -2px 4px rgba(0, 0, 0, 0.2),
          inset 2px 0 6px rgba(139, 69, 19, 0.15),
          inset -2px 0 6px rgba(139, 69, 19, 0.15),
          0 4px 20px rgba(0, 0, 0, 0.3), 0 8px 40px rgba(0, 0, 0, 0.2),
          0 0 60px rgba(139, 69, 19, 0.1);
        transition: all 4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* Wood grain effect */
      .gate-door::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: repeating-linear-gradient(
            90deg,
            rgba(139, 69, 19, 0.1) 0px,
            rgba(160, 82, 45, 0.2) 2px,
            rgba(139, 69, 19, 0.1) 4px,
            transparent 6px,
            transparent 12px
          ),
          repeating-linear-gradient(
            0deg,
            rgba(101, 67, 33, 0.05) 0px,
            rgba(139, 69, 19, 0.1) 1px,
            rgba(101, 67, 33, 0.05) 2px,
            transparent 3px,
            transparent 8px
          );
        opacity: 0.6;
        z-index: 1;
      }

      .gate-door-left {
        left: 0;
        border-right: 2px solid rgba(101, 67, 33, 0.6);
        border-top-right-radius: 12px;
        border-bottom-right-radius: 12px;
        box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.1),
          inset 0 -2px 4px rgba(0, 0, 0, 0.2),
          inset -4px 0 8px rgba(139, 69, 19, 0.2), 4px 0 20px rgba(0, 0, 0, 0.3),
          8px 0 40px rgba(0, 0, 0, 0.15);
      }

      .gate-door-right {
        right: 0;
        border-left: 2px solid rgba(101, 67, 33, 0.6);
        border-top-left-radius: 12px;
        border-bottom-left-radius: 12px;
        box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.1),
          inset 0 -2px 4px rgba(0, 0, 0, 0.2),
          inset 4px 0 8px rgba(139, 69, 19, 0.2), -4px 0 20px rgba(0, 0, 0, 0.3),
          -8px 0 40px rgba(0, 0, 0, 0.15);
      }

      /* Wooden door panels */
      .gate-door::after {
        content: "";
        position: absolute;
        top: 10%;
        left: 8%;
        width: 84%;
        height: 80%;
        border: 2px solid rgba(101, 67, 33, 0.8);
        border-radius: 12px;
        box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.2),
          inset 0 0 40px rgba(139, 69, 19, 0.3);
        z-index: 2;
      }

      .gate-door.sliding-left {
        animation: slideLeftPhased 6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      }

      .gate-door.sliding-right {
        animation: slideRightPhased 6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      }

      @keyframes slideLeftPhased {
        0% {
          transform: translateX(0%);
        }
        60% {
          transform: translateX(-60%);
        }
        100% {
          transform: translateX(calc(-100% - 200px));
        }
      }

      @keyframes slideRightPhased {
        0% {
          transform: translateX(0%);
        }
        60% {
          transform: translateX(60%);
        }
        100% {
          transform: translateX(calc(100% + 200px));
        }
      }

      /* Gate Decorations */
      .gate-decoration {
        position: absolute;
        width: 100%;
        height: 100%;
      }

      .gate-pattern {
        position: absolute;
        width: 70%;
        height: 35%;
        top: 25%;
        left: 15%;
        border: 2px solid rgba(139, 69, 69, 0.8);
        border-radius: 8px;
        background: linear-gradient(
            45deg,
            rgba(180, 100, 100, 0.4) 0%,
            rgba(200, 120, 120, 0.5) 50%,
            rgba(180, 100, 100, 0.4) 100%
          ),
          url("img/wall.jpg");
        background-size: cover;
        background-position: center;
        box-shadow: inset 0 0 15px rgba(139, 69, 69, 0.3),
          0 2px 8px rgba(0, 0, 0, 0.2);
        z-index: 3;
      }

      .gate-pattern::before {
        content: "";
        position: absolute;
        top: 25%;
        left: 15%;
        width: 70%;
        height: 50%;
        border: 1px solid rgba(139, 69, 69, 0.6);
        border-radius: 4px;
        background: linear-gradient(
          90deg,
          rgba(160, 82, 82, 0.3) 0%,
          rgba(180, 100, 100, 0.4) 50%,
          rgba(160, 82, 82, 0.3) 100%
        );
        box-shadow: inset 0 0 8px rgba(139, 69, 69, 0.2);
      }

      .gate-pattern::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 8px;
        height: 8px;
        transform: translate(-50%, -50%);
        border-radius: 50%;
        background: radial-gradient(
          circle,
          rgba(139, 69, 69, 0.8) 0%,
          rgba(160, 82, 82, 0.4) 70%,
          transparent 100%
        );
        border: 1px solid rgba(139, 69, 69, 0.7);
        box-shadow: 0 0 4px rgba(101, 67, 33, 0.6),
          inset 0 0 3px rgba(0, 0, 0, 0.3);
      }

      /* Wooden decorative studs */
      .gate-flower {
        position: absolute;
        width: 16px;
        height: 16px;
        background: radial-gradient(
            circle,
            rgba(139, 69, 69, 0.9) 0%,
            rgba(120, 60, 60, 0.8) 100%
          ),
          url("img/wall.jpg");
        background-size: cover;
        background-position: center;
        border-radius: 50%;
        border: 1px solid rgba(120, 60, 60, 0.9);
        box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.4),
          0 1px 3px rgba(0, 0, 0, 0.5);
        z-index: 4;
      }

      .gate-flower::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 4px;
        height: 4px;
        transform: translate(-50%, -50%);
        background: rgba(120, 60, 60, 0.95);
        border-radius: 50%;
        box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.6);
      }

      .gate-flower-1 {
        top: 15%;
        left: 15%;
        animation: flowerGlow 8s ease-in-out infinite;
      }
      .gate-flower-2 {
        top: 25%;
        right: 20%;
        animation: flowerGlow 8s ease-in-out infinite 0.5s;
      }
      .gate-flower-3 {
        bottom: 30%;
        left: 25%;
        animation: flowerGlow 8s ease-in-out infinite 1s;
      }
      .gate-flower-4 {
        bottom: 20%;
        right: 15%;
        animation: flowerGlow 8s ease-in-out infinite 1.5s;
      }
      .gate-flower-5 {
        top: 45%;
        left: 30%;
        animation: flowerGlow 8s ease-in-out infinite 2s;
      }
      .gate-flower-6 {
        top: 55%;
        right: 30%;
        animation: flowerGlow 8s ease-in-out infinite 2.5s;
      }

      @keyframes flowerGlow {
        0%,
        100% {
          transform: scale(1);
          box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.4),
            0 1px 3px rgba(0, 0, 0, 0.5);
        }
        50% {
          transform: scale(1.05);
          box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5),
            0 2px 6px rgba(0, 0, 0, 0.6), 0 0 8px rgba(139, 69, 19, 0.4);
        }
      }

      /* Character images on gate walls */
      .gate-character {
        position: absolute;
        width: 120px;
        height: 120px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        border-radius: 15px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3),
          inset 0 0 0 3px rgba(255, 255, 255, 0.2);
        animation: characterFloat 8s ease-in-out infinite;
        z-index: 5;
      }

      .gate-character-bb1 {
        background-image: url("img/bb1.jpg");
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        animation-delay: 0s;
      }

      .gate-character-dd1 {
        background-image: url("img/dd1.jpg");
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        animation-delay: 1s;
      }

      @keyframes characterFloat {
        0%,
        100% {
          transform: translate(-50%, -50%) translateY(0px) scale(1);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3),
            inset 0 0 0 3px rgba(255, 255, 255, 0.2);
        }
        50% {
          transform: translate(-50%, -50%) translateY(-8px) scale(1.02);
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4),
            inset 0 0 0 3px rgba(255, 255, 255, 0.3),
            0 0 15px rgba(255, 255, 255, 0.1);
        }
      }

      /* Wooden trim strips */
      .gate-vine {
        position: absolute;
        width: 5px;
        background: linear-gradient(
          to bottom,
          rgba(101, 67, 33, 0.95) 0%,
          rgba(139, 69, 19, 0.9) 30%,
          rgba(160, 82, 45, 0.85) 50%,
          rgba(139, 69, 19, 0.9) 70%,
          rgba(101, 67, 33, 0.95) 100%
        );
        border-radius: 2px;
        border: 1px solid rgba(101, 67, 33, 0.9);
        box-shadow: inset 0 0 3px rgba(0, 0, 0, 0.3),
          1px 0 3px rgba(0, 0, 0, 0.3);
        opacity: 0.8;
        z-index: 4;
        animation: vineGrow 4s ease-out both;
      }

      .gate-vine-1 {
        height: 60%;
        top: 20%;
        left: 10%;
        transform: rotate(15deg);
        animation: vineGrow 4s ease-out 0.5s both;
      }

      .gate-vine-2 {
        height: 70%;
        top: 15%;
        right: 12%;
        transform: rotate(-20deg);
        animation: vineGrow 4s ease-out 0.8s both;
      }

      .gate-vine-3 {
        height: 50%;
        bottom: 10%;
        left: 20%;
        transform: rotate(25deg);
        animation: vineGrow 4s ease-out 1.1s both;
      }

      @keyframes vineGrow {
        0% {
          height: 0;
          opacity: 0;
        }
        100% {
          opacity: 0.7;
        }
      }

      /* Wooden door handles */
      .gate-handle {
        position: absolute;
        top: 48%;
        width: 10px;
        height: 45px;
        background: linear-gradient(
          to bottom,
          rgba(139, 69, 69, 0.95) 0%,
          rgba(120, 60, 60, 1) 20%,
          rgba(139, 69, 69, 0.95) 50%,
          rgba(120, 60, 60, 1) 80%,
          rgba(139, 69, 69, 0.95) 100%
        );
        border: 1px solid rgba(120, 60, 60, 0.9);
        border-radius: 5px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5),
          inset 0 1px 0 rgba(222, 184, 135, 0.4),
          inset 0 -1px 0 rgba(101, 67, 33, 0.6);
        z-index: 5;
        animation: handleShine 6s ease-in-out infinite;
      }

      .gate-door-left .gate-handle {
        right: 20px;
      }

      .gate-door-right .gate-handle {
        left: 20px;
      }

      .gate-handle::before {
        content: "";
        position: absolute;
        top: 25%;
        left: 50%;
        width: 4px;
        height: 4px;
        background: rgba(120, 60, 60, 0.95);
        border-radius: 50%;
        transform: translateX(-50%);
        border: 1px solid rgba(120, 60, 60, 0.9);
        box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.6),
          0 1px 2px rgba(0, 0, 0, 0.4);
      }

      .gate-handle::after {
        content: "";
        position: absolute;
        top: 75%;
        left: 50%;
        width: 4px;
        height: 4px;
        background: rgba(120, 60, 60, 0.95);
        border-radius: 50%;
        transform: translateX(-50%);
        border: 1px solid rgba(120, 60, 60, 0.9);
        box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.6),
          0 1px 2px rgba(0, 0, 0, 0.4);
      }

      @keyframes handleShine {
        0%,
        100% {
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5),
            inset 0 1px 0 rgba(222, 184, 135, 0.4),
            inset 0 -1px 0 rgba(101, 67, 33, 0.6);
        }
        50% {
          box-shadow: 0 3px 8px rgba(0, 0, 0, 0.6),
            inset 0 1px 0 rgba(222, 184, 135, 0.6),
            inset 0 -1px 0 rgba(101, 67, 33, 0.8),
            0 0 10px rgba(139, 69, 19, 0.4);
        }
      }

      /* Gate Lock Styling */
      .gate-lock {
        position: absolute;
        top: 50%;
        left: -75px;
        transform: translateY(-50%);
        z-index: 10;
        transition: all 0.8s ease;
        pointer-events: auto;
      }

      .gate-lock-img {
        width: 150px;
        height: 150px;
        object-fit: contain;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5))
          drop-shadow(0 0 12px rgba(255, 215, 0, 0.4));
        animation: lockGlow 5s ease-in-out infinite alternate;
      }

      @keyframes lockGlow {
        0% {
          filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))
            drop-shadow(0 0 8px rgba(255, 215, 0, 0.2));
          transform: scale(1);
        }
        100% {
          filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.4))
            drop-shadow(0 0 12px rgba(255, 215, 0, 0.4));
          transform: scale(1.05);
        }
      }

      /* Lock hover effect */
      .gate-lock:hover .gate-lock-img {
        filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.5))
          drop-shadow(0 0 16px rgba(255, 215, 0, 0.6));
        transform: scale(1.1);
      }

      /* Welcome text on gates */
      .gate-welcome {
        position: absolute;
        top: 75%;
        left: 50%;
        transform: translateX(-50%);
        color: #ffffff;
        font-family: "Playfair Display", serif;
        font-size: 2.5em;
        font-weight: 700;
        text-align: center;
        text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.8),
          0 0 10px rgba(255, 215, 0, 0.5), 0 0 20px rgba(255, 215, 0, 0.3);
        animation: welcomeGlow 6s ease-in-out infinite;
        pointer-events: none;
        line-height: 1.1;
        letter-spacing: 2px;
        z-index: 7;
      }

      /* Different styles for left and right gate text */
      .gate-door-left .gate-welcome {
        font-size: 3.2em;
        top: 75%;
        font-weight: 800;
      }

      .gate-door-right .gate-welcome {
        font-size: 2em;
        top: 72%;
        font-weight: 700;
        line-height: 1.2;
      }

      @keyframes welcomeGlow {
        0%,
        100% {
          text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.8),
            0 0 10px rgba(255, 215, 0, 0.5), 0 0 20px rgba(255, 215, 0, 0.3);
          transform: translateX(-50%) scale(1);
        }
        50% {
          text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.8),
            0 0 15px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 215, 0, 0.5),
            0 0 40px rgba(255, 255, 255, 0.3);
          transform: translateX(-50%) scale(1.03);
        }
      }

      /* Sparkle effects for gate opening */
      .gate-sparkle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: #ffd700;
        border-radius: 50%;
        animation: gateSparkle 5s ease-out infinite;
        pointer-events: none;
      }

      @keyframes gateSparkle {
        0% {
          opacity: 0;
          transform: scale(0) rotate(0deg);
        }
        50% {
          opacity: 1;
          transform: scale(1.5) rotate(180deg);
        }
        100% {
          opacity: 0;
          transform: scale(0) rotate(360deg);
        }
      }

      /* Gate opening sound effect simulation */
      .gate-sound-effect {
        position: fixed;
        top: -100px;
        left: -100px;
        width: 1px;
        height: 1px;
        opacity: 0;
        pointer-events: none;
      }

      /* Mobile optimizations for gate */
      @media (max-width: 768px) {
        .gate-welcome {
          font-size: 1.8em;
          font-weight: 800;
        }

        .gate-door-left .gate-welcome {
          font-size: 2.4em;
          font-weight: 900;
        }

        .gate-door-right .gate-welcome {
          font-size: 1.6em;
          font-weight: 700;
        }

        .gate-flower {
          width: 20px;
          height: 20px;
        }

        .gate-character {
          width: 80px;
          height: 80px;
        }

        .gate-character-bb1 {
          top: 50%;
          left: 50%;
        }

        .gate-character-dd1 {
          top: 50%;
          left: 50%;
        }

        .gate-pattern {
          border-width: 2px;
        }
      }

      /* Remove conflicting animations */
      @media (prefers-reduced-motion: reduce) {
        .petal,
        .floating-heart,
        .leaf {
          display: none;
        }
      }

      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .invitation-container {
        max-width: 760px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(15px);
        border-radius: 0;
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.1);
        margin-top: 0;
        margin-bottom: 0;
        overflow: hidden;
        position: relative;
        min-height: 100vh;
        /*opacity: 0;*/
        /*transform: scale(0.9);*/
        transition: opacity 1.5s ease-out, transform 1.5s ease-out;
        /*visibility: hidden;*/
      }

      .invitation-container.visible {
        opacity: 1;
        transform: scale(1);
        visibility: visible;
      }

      /* Entrance animation for the whole invitation card */
      @keyframes invitationEntrance {
        0% {
          opacity: 0;
          transform: translateY(18px) scale(0.99);
          filter: blur(3px) saturate(0.95);
        }
        100% {
          opacity: 1;
          transform: translateY(0) scale(1);
          filter: blur(0) saturate(1);
        }
      }

      /* When visible, play a subtle entrance animation */
      .invitation-container.visible.animated {
        animation: invitationEntrance 900ms cubic-bezier(0.16, 0.84, 0.24, 1)
          both;
      }

      /* Stagger children inside the invitation container for nicer entrance */
      .invitation-container .stagger-child {
        opacity: 0;
        transform: translateY(12px);
        transition: opacity 760ms cubic-bezier(0.16, 0.84, 0.24, 1),
          transform 760ms cubic-bezier(0.16, 0.84, 0.24, 1);
      }

      .invitation-container.animated .stagger-child {
        opacity: 1;
        transform: translateY(0);
      }

      /* Stagger utility classes (small delays) */
      .stagger-delay-1 {
        transition-delay: 0.12s;
      }
      .stagger-delay-2 {
        transition-delay: 0.28s;
      }
      .stagger-delay-3 {
        transition-delay: 0.44s;
      }
      .stagger-delay-4 {
        transition-delay: 0.6s;
      }

      /* Respect user preference to reduce motion */
      @media (prefers-reduced-motion: reduce) {
        .invitation-container.visible.animated,
        .invitation-container .stagger-child {
          animation: none !important;
          transition: none !important;
          transform: none !important;
          opacity: 1 !important;
        }
      }

      /* Ensure invitation is hidden when not visible (safe defaults) */
      .invitation-container:not(.visible) {
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        transform: scale(0.98);
      }

      @keyframes revealInvitation {
        /*0% {*/
        /*    opacity: 0;*/
        /*    transform: scale(0.9);*/
        /*}*/
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      @keyframes slideInFromTop {
        /*0% {*/
        /*    opacity: 0;*/
        /*    transform: translateY(-50px) scale(0.95);*/
        /*}*/
        100% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .hero-section {
        position: relative;
        min-height: 100vh;
        background: linear-gradient(
          45deg,
          rgba(255, 182, 193, 0.1),
          rgba(255, 218, 185, 0.1)
        );
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        overflow: hidden;
        padding: 20px 0;

        /* Couple names layout */
      }

      .couple-names {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 2rem;
        line-height: 1;
        overflow: visible;
      }

      /* Small centered image under the couple names */
      .couple-hy {
        display: flex;
        justify-content: center;
        margin-top: 6px;
      }

      .couple-hy img {
        width: 96px;
        height: auto;
        object-fit: contain;
        display: block;
      }

      @media (max-width: 480px) {
        .couple-hy img {
          width: 72px;
        }
      }

      .couple-names .name-left,
      .couple-names .name-right,
      .couple-names .ampersand {
        display: inline-block;
        opacity: 0;
        transform: translateX(0);
        transition: transform 520ms cubic-bezier(0.22, 1, 0.36, 1),
          opacity 520ms ease;
      }

      /* Directional helpers */
      .from-top {
        transform: translateY(-18px);
      }
      .from-bottom {
        transform: translateY(18px);
      }

      /* Fade-in helper (for image wrappers) */
      .fade-in {
        opacity: 0;
        transform: none;
        transition: opacity 600ms ease;
      }

      .invitation-container.animated .from-top,
      .invitation-container.animated .from-bottom {
        transform: translateY(0);
        opacity: 1;
      }

      .invitation-container.animated .fade-in {
        opacity: 1;
      }

      /* Start positions for side-in */
      .couple-names .name-left {
        transform: translateX(-40px);
      }
      .couple-names .name-right {
        transform: translateX(40px);
      }

      /* When container is animated, slide names into place */
      .invitation-container.animated .couple-names .name-left,
      .invitation-container.animated .couple-names .ampersand,
      .invitation-container.animated .couple-names .name-right {
        opacity: 1;
        transform: translateX(0);
      }

      /* Slight delay on ampersand for rhythm */
      .invitation-container.animated .couple-names .ampersand {
        transition-delay: 0.06s;
      }

      @media (prefers-reduced-motion: reduce) {
        .couple-names .name-left,
        .couple-names .name-right,
        .couple-names .ampersand {
          transition: none !important;
          transform: none !important;
          opacity: 1 !important;
        }
      }

      .hero-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("img/010.JPG");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        opacity: 0.08;
        z-index: -1;
        filter: blur(2px) sepia(25%) brightness(1.3) contrast(0.9);
        animation: heroImageFloat 45s ease-in-out infinite;
      }

      .hero-section::after {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        width: 50%;
        height: 100%;
        background-image: url("img/images.jpeg");
        background-size: contain;
        background-position: right center;
        background-repeat: no-repeat;
        opacity: 0.05;
        z-index: -1;
        filter: blur(1px) sepia(20%) brightness(1.2);
        animation: heroImageFloat 40s ease-in-out infinite reverse;
      }

      @keyframes heroImageFloat {
        0%,
        100% {
          transform: scale(1) translateY(0px);
          opacity: 0.12;
        }
        50% {
          transform: scale(1.05) translateY(-5px);
          opacity: 0.08;
        }
      }

      /* Hero Main Image Styles */
      .hero-image-container {
        position: relative;
        max-width: 500px;
        width: 90%;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2),
          0 20px 60px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 255, 255, 0.1);
        animation: heroImageGlow 8s ease-in-out infinite alternate;
      }

      .hero-main-image {
        width: 100%;
        height: auto;
        aspect-ratio: 4/3;
        object-fit: cover;
        display: block;
        transition: transform 0.8s ease, opacity 520ms ease;
        opacity: 0;
      }

      .hero-image-container:hover .hero-main-image {
        transform: scale(1.05);
      }

      .hero-image-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
        padding: 30px 20px 20px;
        color: white;
        text-align: center;
      }

      /* Audio UI removed per request; autoplay attempted programmatically */

      /* Top-left audio toggle button (visible control) */
      .audio-toggle-btn {
        position: fixed;
        top: 12px;
        left: 12px;
        z-index: 100000;
        width: 44px;
        height: 44px;
        border-radius: 8px;
        border: 2px solid rgba(214, 51, 132, 0.15);
        background: linear-gradient(135deg, #ffffff, #fff8fb);
        color: #d63384;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        cursor: pointer;
        box-shadow: 0 6px 18px rgba(214, 51, 132, 0.12);
        transition: transform 180ms ease, box-shadow 180ms ease,
          background 180ms ease;
      }

      .audio-toggle-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(214, 51, 132, 0.16);
      }

      .audio-toggle-btn[aria-pressed="true"] {
        background: linear-gradient(135deg, #ffdfe8, #ffeaf2);
        color: #b02a5b;
      }

      /* When image has been decoded and container is animated, show it immediately */
      .hero-main-image.decoded {
        opacity: 1;
      }
      .invitation-container.animated .hero-main-image {
        opacity: 1;
      }

      .hero-love-quote {
        font-family: "Playfair Display", serif;
        font-size: 1.1em;
        font-style: italic;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        line-height: 1.4;
      }

      @keyframes heroImageGlow {
        0% {
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2),
            0 20px 60px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 255, 255, 0.1);
        }
        100% {
          box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3),
            0 25px 80px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.2),
            0 0 30px rgba(255, 182, 193, 0.3);
        }
      }

      .hero-background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><pattern id="hearts" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse"><text x="20" y="30" font-size="20" fill="rgba(255,182,193,0.1)">‚ô•</text><text x="70" y="70" font-size="15" fill="rgba(255,182,193,0.08)">‚ô•</text></pattern></defs><rect width="100%" height="100%" fill="url(%23hearts)"/></svg>');
        opacity: 0.3;
        animation: float 40s ease-in-out infinite;
      }

      .date-badge {
        position: absolute;
        top: 30px;
        right: 30px;
        background: none;
        color: #8b4513;
        padding: 0;
        border-radius: 0;
        font-weight: 300;
        font-size: 0.9em;
        border: none;
        text-align: center;
        line-height: 1.2;
      }

      .date-large {
        font-size: 2.2em;
        font-weight: 700;
        display: block;
        color: #a0522d;
      }

      .month-year {
        font-size: 0.8em;
        font-weight: 400;
        display: block;
        margin-top: 2px;
        color: #8b4513;
        letter-spacing: 1px;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .main-title {
        font-family: "Great Vibes", cursive;
        font-size: 2em;
        color: #2c3e50;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        position: relative;
        animation: titleGlow 8s ease-in-out infinite alternate;
      }

      @keyframes titleGlow {
        0% {
          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
          transform: scale(1);
        }
        100% {
          text-shadow: 0 0 30px rgba(214, 51, 132, 0.4),
            2px 2px 4px rgba(0, 0, 0, 0.1);
          transform: scale(1.02);
        }
      }

      .couple-names {
        font-family: "Playfair Display", serif;
        font-size: 3em;
        color: #d63384;
        margin: 30px 0;
        font-weight: 700;
        position: relative;
        animation: fadeInUp 2s ease-out 1s both;
      }

      @keyframes fadeInUp {
        0% {
          opacity: 0;
          transform: translateY(30px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .wedding-date {
        font-family: "Inter", sans-serif;
        font-size: 1.3em;
        color: #6c757d;
        margin: 20px 0;
        font-weight: 300;
        letter-spacing: 2px;
      }

      .countdown-section {
        margin: 40px 0;
        padding: 30px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 20px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      }

      .countdown-title {
        font-family: "Dancing Script", cursive;
        font-size: 2em;
        color: #d63384;
        text-align: center;
        margin-bottom: 20px;
      }

      .countdown-timer {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        text-align: center;
        max-width: 500px;
        margin: 0 auto;
      }

      .countdown-item {
        display: flex;
        justify-content: center;
      }

      .countdown-box {
        background: linear-gradient(135deg, #d63384, #e74c3c);
        color: white;
        padding: 20px 15px;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(214, 51, 132, 0.3);
        transition: all 0.8s ease;
        animation: countdownPulse 4s ease-in-out infinite;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
        min-width: 80px;
      }

      .countdown-box:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 15px 35px rgba(214, 51, 132, 0.4);
      }

      .countdown-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }

      .countdown-box {
        background: linear-gradient(135deg, #d63384, #e74c3c);
        color: white;
        padding: 15px 10px;
        border-radius: 12px;
        box-shadow: 0 8px 20px rgba(214, 51, 132, 0.3);
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        animation: countdownPulse 4s ease-in-out infinite;
        min-height: 70px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 4px;
        cursor: pointer;
        user-select: none;
      }

      .countdown-box:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 15px 35px rgba(214, 51, 132, 0.4);
      }

      @keyframes countdownPulse {
        0%,
        100% {
          box-shadow: 0 10px 25px rgba(214, 51, 132, 0.3);
        }
        50% {
          box-shadow: 0 15px 35px rgba(214, 51, 132, 0.5);
        }
      }

      .countdown-number {
        font-size: 2.2em;
        font-weight: 700;
        display: block;
        line-height: 1;
        margin: 0;
      }

      .countdown-label {
        font-size: 0.8em;
        text-transform: uppercase;
        letter-spacing: 1px;
        color: white;
        font-weight: 400;
        text-align: center;
        margin: 0;
        opacity: 0.9;
      }

      @keyframes numberFlip {
        0% {
          transform: rotateY(90deg);
        }
        100% {
          transform: rotateY(0deg);
        }
      }

      .calendar-section {
        margin: 30px 0 0 0;
        text-align: center;
      }

      .calendar-title {
        font-family: "Dancing Script", cursive;
        font-size: 1.5em;
        color: #8b4513;
        margin-bottom: 20px;
      }

      .calendar {
        display: inline-block;
        background: none;
        border-radius: 0;
        box-shadow: none;
        overflow: visible;
        border: none;
        max-width: 100%;
        width: 100%;
      }

      .calendar-header {
        background: none;
        color: #d63384;
        padding: 10px 0;
        font-family: "Dancing Script", cursive;
        font-size: 1.5em;
        font-weight: 400;
        text-transform: none;
        letter-spacing: normal;
        text-align: center;
        margin-bottom: 15px;
      }

      .calendar-body {
        padding: 0;
        background: none;
      }

      .weekdays {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 4px;
        margin-bottom: 8px;
        max-width: 400px;
        margin: 0 auto 8px auto;
      }

      .weekday {
        text-align: center;
        font-weight: 500;
        color: #6c757d;
        font-size: 0.75em;
        padding: 4px 2px;
        background: none;
        border-radius: 0;
      }

      .calendar-days {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 4px;
        max-width: 400px;
        margin: 0 auto;
      }

      /* Enhanced calendar day interactions */
      .calendar-day {
        position: relative;
        overflow: hidden;
      }

      .calendar-day::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: rgba(214, 51, 132, 0.2);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.8s ease;
      }

      .calendar-day:hover::before {
        width: 100%;
        height: 100%;
      }

      .calendar-day {
        text-align: center;
        padding: 6px 2px;
        font-size: 0.85em;
        color: #6c757d;
        border-radius: 6px;
        transition: all 0.8s ease;
        cursor: pointer;
        min-height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .calendar-day.current-month {
        color: #495057;
        background: rgba(255, 255, 255, 0.6);
      }

      .calendar-day.current-month:hover {
        background: rgba(214, 51, 132, 0.1);
        transform: scale(1.05);
      }

      .calendar-day.wedding-day {
        background: red;
        color: white;
        font-weight: 700;
        font-size: 0.9em;
        transform: scale(1.05);
        box-shadow: 0 4px 15px rgba(214, 51, 132, 0.3);
        border: none;
        animation: weddingGlow 2s ease-in-out infinite alternate;
      }

      @keyframes weddingGlow {
        0% {
          box-shadow: 0 4px 15px rgba(214, 51, 132, 0.3);
        }
        100% {
          box-shadow: 0 6px 25px rgba(214, 51, 132, 0.5);
        }
      }

      .calendar-day.other-month {
        color: #adb5bd;
        background: rgba(255, 255, 255, 0.2);
      }

      .content {
        padding: 40px;
        position: relative;
      }

      .section-title {
        font-family: "Playfair Display", serif;
        font-size: 2.2em;
        color: #2c3e50;
        text-align: center;
        margin-bottom: 40px;
        font-weight: 700;
        position: relative;
      }

      .section-title::after {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 60px;
        height: 3px;
        background: linear-gradient(to right, #d63384, #e74c3c);
        border-radius: 2px;
      }

      .family-info {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
        margin: 50px 0;
      }

      .family-side {
        background: rgba(255, 255, 255, 0.8);
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
        border: 1px solid rgba(255, 182, 193, 0.2);
        transition: all 0.8s ease;
        position: relative;
        overflow: hidden;
      }

      .family-side::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 40%;
        background-image: url("img/istockphoto-2090025382-612x612.jpg");
        background-size: cover;
        background-position: center bottom;
        background-repeat: no-repeat;
        opacity: 0.06;
        z-index: -1;
        filter: blur(1.5px) sepia(30%) brightness(1.3);
      }

      .family-side::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(to right, #d63384, #e74c3c);
      }

      .family-side:hover {
        transform: translateY(-8px) rotateY(3deg);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        background: rgba(255, 255, 255, 0.95);
      }

      .family-title {
        font-family: "Playfair Display", serif;
        font-size: 1.5em;
        color: #d63384;
        text-align: center;
        margin-bottom: 25px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .person-info {
        margin-bottom: 20px;
      }

      .person-avatar {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        object-fit: cover;
        margin: 0 auto 15px;
        display: block;
        border: 3px solid rgba(214, 51, 132, 0.3);
        transition: all 0.8s ease;
      }

      .person-avatar:hover {
        transform: scale(1.05);
        border-color: #d63384;
        box-shadow: 0 8px 25px rgba(214, 51, 132, 0.3);
      }

      .person-name {
        font-family: "Playfair Display", serif;
        font-size: 1.4em;
        color: #2c3e50;
        font-weight: 700;
        margin-bottom: 8px;
        text-align: center;
      }

      .person-detail {
        color: #5a6c7d;
        font-size: 1em;
        margin-bottom: 5px;
        text-align: center;
      }

      .address {
        color: #6c757d;
        font-size: 0.95em;
        line-height: 1.5;
        text-align: center;
        font-style: italic;
        margin-top: 15px;
        padding: 15px;
        background: rgba(255, 182, 193, 0.1);
        border-radius: 10px;
      }

      .map-link {
        color: #d63384;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.8s ease;
        display: inline-block;
        padding: 5px 10px;
        border-radius: 15px;
        background: rgba(214, 51, 132, 0.1);
        margin-top: 8px;
        font-size: 0.9em;
      }

      .map-link:hover {
        color: white;
        background: #d63384;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(214, 51, 132, 0.3);
      }

      .map-link::before {
        content: "üó∫Ô∏è ";
        margin-right: 4px;
      }

      .ceremony-section {
        margin: 10px 0;
        /* flatter look: remove card background, border and shadow */
        padding: 10px 0 0 0;
        background: transparent;
        border-radius: 0;
        border: none;
        box-shadow: none;
      }

      .ceremony-title {
        font-family: "Playfair Display", serif;
        font-size: 2em;
        color: #d63384;
        text-align: center;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 2px;
        position: relative;
      }

      .ceremony-details {
        display: grid;
        gap: 25px;
      }

      /* New ceremony layout matching the design */
      .ceremony-details {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        align-items: start;
      }

      .ceremony-item {
        background: transparent;
        border: none;
        padding: 20px;
        text-align: center;
      }

      .ceremony-title-text {
        font-family: "Playfair Display", serif;
        color: #d63384;
        font-size: 1.4em;
        font-weight: 600;
        text-align: center;
        margin-bottom: 15px;
        letter-spacing: 0.5px;
      }

      .ceremony-info {
        display: flex;
        gap: 0;
        align-items: center;
        justify-content: center;
        flex-wrap: nowrap;
        margin-bottom: 8px;
      }

      .time-badge-wrapper {
        display: flex;
        align-items: center;
        gap: 0;
      }

      .time-badge {
        text-align: center;
        padding: 8px 36px;
        border-radius: 0;
        border: none;
        border-left: 3px solid #000;
        border-right: 3px solid #000;
        background: transparent;
        min-width: 160px;
      }

      .time-badge .time {
        font-size: 1em;
        color: #111;
        margin-bottom: 4px;
      }

      .time-badge .day-number {
        font-size: 4.4em;
        font-weight: 700;
        line-height: 1;
        margin: 6px 0;
      }

      .time-badge .month {
        font-size: 1em;
        color: #333;
        margin-top: 4px;
      }

      .weekday-left {
        font-size: 1.1em;
        color: #111;
        text-align: left;
        margin-right: 20px;
        min-width: 80px;
      }

      .year-right {
        font-size: 1.1em;
        color: #111;
        text-align: left;
        margin-left: 20px;
        min-width: 90px;
      }

      .time-badge-sep-left,
      .time-badge-sep-right {
        width: 3px;
        background: #000;
        height: 180px;
        display: inline-block;
        vertical-align: middle;
        border-radius: 1px;
        margin: 0 20px;
      }

      .lunar-note {
        margin: 12px 0 20px 0;
        font-style: italic;
        color: #6c757d;
        font-size: 0.95em;
        text-align: center;
      }

      .location-box {
        /* rounded border box matching the design */
        border: 3px solid #7a2828;
        border-radius: 26px;
        padding: 22px 26px;
        text-align: center;
        background: transparent;
        max-width: 520px;
        margin: 0 auto;
      }

      .location-box .location-address {
        font-style: italic;
        color: #333;
        margin-bottom: 14px;
        font-size: 1.05em;
      }

      .location-box .location-title {
        font-family: "Playfair Display", serif;
        font-weight: 700;
        color: #d63384;
        font-size: 1.15em;
        margin-bottom: 18px;
      }

      .cta-direction {
        display: inline-block;
        background: #d63384;
        color: #fff;
        padding: 10px 28px;
        border-radius: 26px;
        font-family: "Playfair Display", serif;
        font-weight: 700;
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .cta-direction:hover {
        background: #b02a5b;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(214, 51, 132, 0.3);
      }

      @media (max-width: 900px) {
        .ceremony-details {
          grid-template-columns: 1fr;
        }
        .time-badge-sep-left,
        .time-badge-sep-right {
          height: 140px;
          margin: 0 10px;
        }
        .weekday-left {
          margin-right: 10px;
          min-width: 70px;
        }
        .year-right {
          margin-left: 10px;
          min-width: 75px;
        }
        .time-badge {
          margin-bottom: 0;
          padding: 8px 20px;
          min-width: 120px;
        }
        .ceremony-title-text {
          font-size: 0.9em;
        }
      }

      .ceremony-item h4 {
        font-family: "Playfair Display", serif;
        color: #2c3e50;
        font-size: 1.3em;
        margin-bottom: 15px;
        font-weight: 700;
      }

      .ceremony-text-content {
        flex: 1 1 60%;
        min-width: 220px;
      }

      .map-container {
        flex: 0 0 200px;
        width: 200px;
        height: 200px;
        min-height: 200px;
      }

      /* Stack on small screens */
      @media (max-width: 768px) {
        .ceremony-info {
          flex-wrap: wrap;
          flex-direction: column;
        }

        .map-container {
          width: 100%;
          flex: 1 1 100%;
          min-height: 160px;
          margin-left: 0;
        }
      }

      .time-info {
        color: #d63384;
        font-weight: 600;
        font-size: 1.15em;
        margin-bottom: 8px;
      }

      .location-info {
        color: #495057;
        font-weight: 500;
        margin-top: 10px;
      }

      .ceremony-map-link {
        color: #d63384;
        text-decoration: none;
        font-weight: 500;
        font-size: 0.9em;
        padding: 4px 8px;
        border-radius: 12px;
        background: rgba(214, 51, 132, 0.1);
        margin-left: 8px;
        transition: all 0.8s ease;
        display: inline-block;
      }

      .ceremony-map-link:hover {
        color: white;
        background: #d63384;
        transform: translateY(-1px);
        box-shadow: 0 3px 10px rgba(214, 51, 132, 0.3);
      }

      .ceremony-map-link::before {
        content: "üó∫Ô∏è";
        margin-right: 3px;
      }

      /* Embedded Google Maps */
      .embedded-map {
        width: 100%;
        height: 110px;
        border: none;
        border-radius: 8px;
        margin-top: 0;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transition: all 0.8s ease;
      }

      .embedded-map:hover {
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.18);
        transform: scale(1.01);
      }

      .map-container {
        position: relative;
        overflow: hidden;
        border-radius: 8px;
        margin-top: 10px;
        margin-left: 10px;
        background: rgba(255, 255, 255, 0.1);
        padding: 2px;
        width: 40%;
        flex-shrink: 0;
        min-height: 140px; /* reserve vertical space so hover/transform won't push content */
      }

      .map-toggle {
        background: #d63384;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 0.9em;
        cursor: pointer;
        margin-top: 10px;
        transition: all 0.8s ease;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .map-toggle:hover {
        background: #b02a5b;
        transform: translateY(-1px);
      }

      .map-toggle::before {
        content: "üó∫Ô∏è";
      }

      /* Additional responsive breakpoints for maps */
      @media (max-width: 480px) {
        .embedded-map {
          height: 80px;
          border-radius: 6px;
        }

        .map-container {
          border-radius: 6px;
          margin-top: 8px;
          width: 100%;
          margin-left: 0;
        }

        .ceremony-info {
          flex-direction: column;
        }
      }

      @media (min-width: 1200px) {
        .embedded-map {
          height: 280px;
        }
      }

      .sticky-countdown {
        position: fixed;
        top: -100px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(15px);
        border-radius: 25px;
        padding: 8px 20px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(214, 51, 132, 0.2);
        z-index: 1000;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        font-family: "Inter", sans-serif;
      }

      .sticky-countdown.show {
        top: 20px;
      }

      .sticky-countdown-content {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .sticky-countdown-text {
        font-size: 0.85em;
        color: #6c757d;
        font-weight: 400;
      }

      .sticky-countdown-number {
        font-size: 1.2em;
        font-weight: 700;
        color: #d63384;
        min-width: 30px;
        text-align: center;
      }

      .sticky-countdown-label {
        font-size: 0.75em;
        color: #6c757d;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .couple-photo-section {
        text-align: center;
        margin: 60px 0;
        padding: 40px;
        background: linear-gradient(
          135deg,
          rgba(255, 182, 193, 0.05),
          rgba(255, 218, 185, 0.05)
        );
        border-radius: 25px;
        position: relative;
        overflow: hidden;
      }

      .couple-photo-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("img/download.jpeg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        opacity: 0.08;
        z-index: -1;
        filter: blur(1.5px) sepia(25%) brightness(1.2);
        animation: sectionImageGlow 18s ease-in-out infinite;
      }

      @keyframes sectionImageGlow {
        0%,
        100% {
          opacity: 0.1;
          transform: translateX(0px);
        }
        50% {
          opacity: 0.07;
          transform: translateX(10px);
        }
      }

      /* Scroll animations */
      .scroll-animate {
        opacity: 0;
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        /* Ensure transform origin for smoother direction-based motion */
        transform-origin: center center;
      }

      /* Existing directional helpers (used in markup) */
      .scroll-animate.animate-from-left {
        transform: translateX(-60px);
      }

      .scroll-animate.animate-from-right {
        transform: translateX(60px);
      }

      .scroll-animate.animate-from-bottom {
        transform: translateY(40px);
      }

      /* New: initial states for scroll direction-aware animations
           - khi cu·ªôn xu·ªëng (scroll-down) ph·∫ßn t·ª≠ xu·∫•t hi·ªán t·ª´ d∆∞·ªõi l√™n
           - khi cu·ªôn l√™n (scroll-up) ph·∫ßn t·ª≠ xu·∫•t hi·ªán t·ª´ tr√™n xu·ªëng
           L∆∞u √Ω: l·ªõp .animate-down / .animate-up ƒë∆∞·ª£c g√°n b·ªüi JS t√πy h∆∞·ªõng cu·ªôn */
      .scroll-animate.animate-down {
        transform: translateY(36px);
        opacity: 0;
      }

      .scroll-animate.animate-up {
        transform: translateY(-36px);
        opacity: 0;
      }

      /* Khi ph·∫ßn t·ª≠ v√†o v√πng nh√¨n th·∫•y, .visible s·∫Ω ƒë∆∞a v·ªÅ tr·∫°ng th√°i m·∫∑c ƒë·ªãnh
           v√† CSS transition s·∫Ω t·∫°o hi·ªáu ·ª©ng m∆∞·ª£t theo h∆∞·ªõng ƒë√£ thi·∫øt l·∫≠p */
      .scroll-animate.visible {
        opacity: 1;
        transform: translateX(0) translateY(0);
      }

      .scroll-animate.visible.stagger-1 {
        transition-delay: 0.1s;
      }

      .scroll-animate.visible.stagger-2 {
        transition-delay: 0.2s;
      }

      .scroll-animate.visible.stagger-3 {
        transition-delay: 0.3s;
      }

      .couple-photo {
        width: 300px;
        height: 400px;
        margin: 0 auto;
        border-radius: 20px;
        object-fit: cover;
        border: 3px solid rgba(214, 51, 132, 0.3);
        transition: all 0.8s ease;
        animation: photoGlow 4s ease-in-out infinite alternate;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      }

      @keyframes photoGlow {
        0% {
          box-shadow: 0 10px 30px rgba(214, 51, 132, 0.1);
        }
        100% {
          box-shadow: 0 20px 50px rgba(214, 51, 132, 0.2);
        }
      }

      .couple-photo:hover {
        transform: scale(1.05);
        border-color: #d63384;
        box-shadow: 0 20px 50px rgba(214, 51, 132, 0.2);
      }

      .love-quote {
        font-family: "Great Vibes", cursive;
        font-size: 1.8em;
        color: #d63384;
        text-align: center;
        margin: 40px 0;
        font-style: italic;
        animation: fadeIn 3s ease-out 2s both;
      }

      @keyframes fadeIn {
        0% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }

      .footer {
        text-align: center;
        padding: 50px 40px;
        background: linear-gradient(135deg, #d63384, #e74c3c);
        color: white;
        position: relative;
        overflow: hidden;
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        min-height: auto;
        will-change: min-height, padding;
      }

      .footer::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("img/1.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        opacity: 0.06;
        z-index: -1;
        filter: blur(2px) sepia(40%) brightness(0.9) contrast(1.1);
        animation: footerImagePulse 22s ease-in-out infinite;
      }

      @keyframes footerImagePulse {
        0%,
        100% {
          opacity: 0.08;
          transform: scale(1);
        }
        50% {
          opacity: 0.05;
          transform: scale(1.05);
        }
      }

      /* Wedding Photo Gallery Section */
      .photo-gallery-section {
        margin: 20px 0;
        padding: 40px 40px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.95),
          rgba(248, 249, 250, 0.9)
        );
        border-radius: 25px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08);
        position: relative;
        overflow: hidden;
      }

      .photo-gallery-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url("img/bg.jpg");
        background-size: cover;
        background-position: center;
        opacity: 0.05;
        z-index: -1;
        filter: blur(1px) sepia(20%);
      }

      .gallery-title {
        font-family: "Playfair Display", serif;
        font-size: 2.5em;
        color: #d63384;
        text-align: center;
        margin-bottom: 50px;
        font-weight: 700;
        position: relative;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .gallery-title::after {
        content: "";
        position: absolute;
        bottom: -15px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: linear-gradient(to right, #d63384, #e74c3c);
        border-radius: 2px;
      }

      .photo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        max-width: 1200px;
        margin: 0 auto;
      }

      .photo-item {
        position: relative;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        background: #fff;
      }

      .photo-item:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 25px 50px rgba(214, 51, 132, 0.2);
      }

      .photo-item.featured {
        grid-column: span 2;
      }

      .photo-item img {
        width: 100%;
        height: 250px;
        object-fit: cover;
        transition: all 1.2s ease;
        filter: brightness(1) saturate(1);
        opacity: 1;
        display: block;
      }

      .photo-item.featured img {
        height: 350px;
      }

      .photo-item:hover img {
        transform: scale(1.05);
        filter: brightness(1.1) saturate(1.2);
      }

      .photo-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(214, 51, 132, 0.7),
          rgba(231, 76, 60, 0.5)
        );
        opacity: 0;
        transition: all 0.8s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-family: "Playfair Display", serif;
        font-size: 1.2em;
        font-weight: 600;
        text-align: center;
        padding: 20px;
      }

      .photo-item:hover .photo-overlay {
        opacity: 1;
      }

      .photo-overlay::after {
        content: "‚ú®";
        font-size: 1.5em;
        margin-left: 10px;
        animation: sparkle 2s ease-in-out infinite;
      }

      @keyframes sparkle {
        0%,
        100% {
          transform: scale(1) rotate(0deg);
        }
        50% {
          transform: scale(1.2) rotate(180deg);
        }
      }

      .photo-caption {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
        color: white;
        padding: 20px;
        font-family: "Dancing Script", cursive;
        font-size: 1.3em;
        text-align: center;
        transform: translateY(100%);
        transition: all 0.8s ease;
      }

      .photo-item:hover .photo-caption {
        transform: translateY(0);
      }

      /* Enhanced photo gallery without lightbox */
      .photo-item {
        position: relative;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        background: #fff;
        cursor: pointer;
        opacity: 1;
        min-height: 250px;
      }

      .photo-item:hover {
        transform: translateY(-10px) scale(1.05);
        box-shadow: 0 25px 50px rgba(214, 51, 132, 0.3);
      }

      /* Side-in entrance for gallery images */
      .photo-item.from-left,
      .photo-item.from-right {
        opacity: 0;
        transform: translateX(0) translateY(12px);
        transition: transform 1200ms cubic-bezier(0.22, 1, 0.36, 1),
          opacity 1200ms ease;
      }

      .photo-item.from-left {
        transform: translateX(-40px) translateY(12px);
      }

      .photo-item.from-right {
        transform: translateX(40px) translateY(12px);
      }

      .photo-item.visible.from-left,
      .photo-item.visible.from-right {
        opacity: 1;
        transform: translateX(0) translateY(0);
      }

      .photo-item.featured {
        min-height: 350px;
      }

      .photo-item:last-child {
        min-height: 700px;
      }

      .photo-item:last-child img {
        height: 700px;
        object-fit: cover;
      }

      /* Mobile optimizations for gallery */
      @media (max-width: 768px) {
        .photo-gallery-section {
          margin: 40px 0;
          padding: 30px 20px;
        }

        .gallery-title {
          font-size: 2em;
          margin-bottom: 30px;
        }

        .photo-grid {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .photo-item.featured {
          grid-column: span 1;
        }

        .photo-item img {
          height: 200px;
        }

        .photo-item.featured img {
          height: 250px;
        }

        .photo-overlay {
          font-size: 1em;
          padding: 15px;
        }
      }

      .footer.fullscreen {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 60px 40px;
      }

      .footer.fullscreen .footer-message {
        font-size: 3.5em;
        margin-bottom: 40px;
        animation: fadeInScale 1s ease-out 0.3s both;
        color: rgba(255, 255, 255, 0.75);
      }

      .footer.fullscreen .footer-content {
        font-size: 1.4em;
        max-width: 800px;
        animation: fadeInUp 1s ease-out 0.6s both;
        color: rgba(255, 255, 255, 0.8);
      }

      .back-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #ffffff, #f8f9fa);
        border: 2px solid #d63384;
        border-radius: 50%;
        color: #d63384;
        font-size: 24px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        visibility: hidden;
        transform: scale(0.8);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 10000;
        box-shadow: 0 8px 25px rgba(214, 51, 132, 0.2);
        backdrop-filter: blur(10px);
      }

      .back-to-top.show {
        opacity: 1;
        visibility: visible;
        transform: scale(1);
      }

      .back-to-top:hover {
        background: linear-gradient(135deg, #d63384, #e74c3c);
        color: white;
        transform: scale(1.1);
        box-shadow: 0 12px 35px rgba(214, 51, 132, 0.4);
      }

      .back-to-top:active {
        transform: scale(0.95);
      }

      @keyframes fadeInScale {
        0% {
          opacity: 0;
          transform: scale(0.8);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      @keyframes fadeInUp {
        0% {
          opacity: 0;
          transform: translateY(30px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .footer::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="10" cy="10" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="90" cy="20" r="1.5" fill="rgba(255,255,255,0.08)"/><circle cx="50" cy="90" r="1.2" fill="rgba(255,255,255,0.1)"/></svg>');
        animation: float 15s ease-in-out infinite;
      }

      .footer-message {
        font-family: "Dancing Script", cursive;
        font-size: 2.2em;
        margin-bottom: 20px;
        position: relative;
        z-index: 1;
        color: rgba(255, 255, 255, 0.8);
        opacity: 0.9;
      }

      .footer-content {
        font-size: 1.1em;
        line-height: 1.6;
        position: relative;
        z-index: 1;
        color: rgba(255, 255, 255, 0.85);
        opacity: 0.9;
      }

      .footer-content strong {
        color: rgba(255, 255, 255, 0.95);
        opacity: 1;
      }

      .social-links {
        margin-top: 30px;
        text-align: center;
      }

      .tiktok-link {
        display: inline-block;
        background: linear-gradient(135deg, #ff0050, #ff4081, #e91e63);
        color: white;
        padding: 12px 24px;
        border-radius: 25px;
        text-decoration: none;
        font-family: "Inter", sans-serif;
        font-weight: 600;
        font-size: 1.1em;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 4px 15px rgba(255, 0, 80, 0.3);
        position: relative;
        overflow: hidden;
        z-index: 1;
      }

      .tiktok-link::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s ease;
        z-index: -1;
      }

      .tiktok-link:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 8px 25px rgba(255, 0, 80, 0.4);
        background: linear-gradient(135deg, #e91e63, #ff4081, #ff0050);
      }

      .tiktok-link:hover::before {
        left: 100%;
      }

      .tiktok-link:active {
        transform: translateY(-1px) scale(1.02);
      }

      .tiktok-icon {
        width: 20px;
        height: 20px;
        margin-right: 8px;
        vertical-align: middle;
        filter: brightness(1.2);
      }


      .invitee-name {
        font-family: "Great Vibes", cursive;
        font-size: 2.2em;
        font-weight: 700;
        color: #ea83b6;
        margin: 25px 0;
        position: relative;
        z-index: 2;
        text-shadow: 2px 2px 6px rgba(180, 150, 150, 0.4),
          0 0 20px rgba(244, 139, 192, 0.4), 0 0 40px rgba(231, 131, 181, 0.2);
        animation: inviteeGlow 4s ease-in-out infinite alternate;
        letter-spacing: 2px;
        text-transform: capitalize;
        background: linear-gradient(45deg, #eb61a6, #ffb6c1, #d972a9);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: inviteeGlow 4s ease-in-out infinite alternate,
          gradientMove 6s ease-in-out infinite;
      }

      @keyframes inviteeGlow {
        0% {
          text-shadow: 2px 2px 6px rgba(180, 150, 150, 0.4),
            0 0 20px rgba(244, 139, 192, 0.4), 0 0 40px rgba(231, 131, 181, 0.2);
          transform: scale(1);
          filter: brightness(1);
        }
        100% {
          text-shadow: 2px 2px 8px rgba(180, 150, 150, 0.5),
            0 0 25px rgba(244, 139, 192, 0.5), 0 0 60px rgba(231, 131, 181, 0.3);
          transform: scale(1.02);
          filter: brightness(1.05);
        }
      }

      @keyframes gradientMove {
        0% {
          background-position: 0% 50%;
        }
        100% {
          background-position: 100% 50%;
        }
      }

      .footer.fullscreen .invitee-name {
        font-size: 4.2em;
        margin: 40px 0;
        animation: fadeInScale 1s ease-out 0.5s both,
          inviteeGlow 2.5s ease-in-out 1.5s infinite alternate,
          gradientMove 4s ease-in-out 1.5s infinite;
      }

      .petal {
        position: fixed;
        width: 8px;
        height: 8px;
        background: linear-gradient(45deg, #ffb6c1, #ffc0cb);
        border-radius: 50% 10% 50% 10%;
        animation: fall linear infinite;
        z-index: 0;
      }

      @keyframes fall {
        0% {
          transform: translateY(-100vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(360deg);
          opacity: 0;
        }
      }

      .floating-heart {
        position: fixed;
        font-size: 18px;
        color: rgba(214, 51, 132, 0.6);
        animation: floatHeart 10s ease-in-out infinite;
        z-index: 0;
        pointer-events: none;
      }

      .leaf {
        position: fixed;
        width: 12px;
        height: 12px;
        background: linear-gradient(45deg, #228b22, #32cd32, #90ee90);
        border-radius: 0% 100% 0% 100%;
        animation: leafFall linear infinite;
        z-index: 0;
        pointer-events: none;
      }

      .leaf::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 1px;
        height: 8px;
        background: #8b4513;
        transform: translate(-50%, -50%) rotate(45deg);
        z-index: -1;
      }

      @keyframes floatHeart {
        0% {
          transform: translateY(100vh) scale(0) rotate(0deg);
          opacity: 0;
        }
        20% {
          opacity: 1;
          transform: translateY(80vh) scale(1) rotate(90deg);
        }
        80% {
          opacity: 1;
          transform: translateY(20vh) scale(1) rotate(270deg);
        }
        100% {
          transform: translateY(-20vh) scale(0) rotate(360deg);
          opacity: 0;
        }
      }

      @keyframes leafFall {
        0% {
          transform: translateY(-100vh) rotate(0deg) scale(1);
          opacity: 1;
        }
        25% {
          transform: translateY(-50vh) rotate(90deg) scale(0.8);
          opacity: 0.8;
        }
        50% {
          transform: translateY(0vh) rotate(180deg) scale(1);
          opacity: 0.6;
        }
        75% {
          transform: translateY(50vh) rotate(270deg) scale(0.9);
          opacity: 0.4;
        }
        100% {
          transform: translateY(120vh) rotate(360deg) scale(0.7);
          opacity: 0;
        }
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      .highlight {
        background: linear-gradient(
          120deg,
          rgba(214, 51, 132, 0.2) 0%,
          rgba(231, 76, 60, 0.2) 100%
        );
        padding: 3px 8px;
        border-radius: 6px;
        color: #d63384;
        font-weight: 600;
      }

      .scroll-indicator {
        position: relative;
        margin: 30px auto 0;
        animation: bounce 4s infinite;
        color: #d63384;
        font-size: 1.5em;
        cursor: pointer;
        display: inline-block;
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      /* Gate Control Button */
      .gate-control-btn {
        position: relative;
        margin: 20px auto 0;
        padding: 12px 24px;
        background: linear-gradient(
          135deg,
          #8b4513 0%,
          #a0522d 50%,
          #8b4513 100%
        );
        border: 2px solid #654321;
        border-radius: 25px;
        color: #ffffff;
        font-family: "Playfair Display", serif;
        font-size: 0.9em;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.8s ease;
        box-shadow: 0 4px 15px rgba(139, 69, 19, 0.4),
          inset 0 1px 0 rgba(255, 255, 255, 0.2);
        animation: gateButtonGlow 6s ease-in-out infinite alternate;
      }

      .gate-control-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(139, 69, 19, 0.6),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
        background: linear-gradient(
          135deg,
          #a0522d 0%,
          #cd853f 50%,
          #a0522d 100%
        );
      }

      .gate-control-btn:active {
        transform: translateY(0);
        box-shadow: 0 2px 8px rgba(139, 69, 19, 0.6),
          inset 0 1px 0 rgba(255, 255, 255, 0.1);
      }

      .gate-icon {
        font-size: 1.2em;
      }

      .gate-text {
        white-space: nowrap;
      }

      @keyframes gateButtonGlow {
        0% {
          box-shadow: 0 4px 15px rgba(139, 69, 19, 0.4),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        100% {
          box-shadow: 0 4px 15px rgba(139, 69, 19, 0.6),
            inset 0 1px 0 rgba(255, 255, 255, 0.3),
            0 0 20px rgba(255, 215, 0, 0.3);
        }
      }

      /* Heart Rain Animation */
      .heart-rain {
        position: fixed;
        top: -50px;
        left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 1000;
        overflow: hidden;
      }

      .falling-heart {
        position: absolute;
        font-size: 20px;
        color: #ff69b4;
        animation: heartFall linear forwards;
        pointer-events: none;
        user-select: none;
      }

      .falling-heart.large {
        font-size: 28px;
        color: #ff1493;
      }

      .falling-heart.small {
        font-size: 14px;
        color: #ffb6c1;
      }

      .falling-heart.gold {
        color: #ffd700;
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      }

      @keyframes heartFall {
        0% {
          transform: translateY(-50px) rotate(0deg);
          opacity: 1;
        }
        /* Keep fully visible until halfway down the viewport */
        50% {
          transform: translateY(50vh) rotate(180deg);
          opacity: 1;
        }
        /* Fade out from mid-screen down to bottom */
        100% {
          transform: translateY(100vh) rotate(360deg);
          opacity: 0;
        }
      }

      @keyframes heartSway {
        0%,
        100% {
          transform: translateX(0px);
        }
        25% {
          transform: translateX(-10px);
        }
        75% {
          transform: translateX(10px);
        }
      }

      @media (max-width: 500px) {
        .main-title {
          visibility: hidden;
          position: relative;
          line-height: 1.2;
        }

        .main-title::before {
          content: "Wedding\AInvitation";
          white-space: pre-line;
          visibility: visible;
          position: absolute;
          left: 50%;
          transform: translateX(-50%);
          width: 100%;
          text-align: center;
        }

        .couple-names {
          font-size: 1.6em;
          margin: 25px 0 35px 0;
          line-height: 1.2;
          height: auto;
          min-height: 120px;
        }

        .couple-names.mobile-layout {
          visibility: hidden;
          position: relative;
        }

        .couple-names.mobile-layout::before {
          content: "Ho√†ng Uy√™n\A&\AVi·∫øt ƒê√¥ng";
          white-space: pre-line;
          visibility: visible;
          position: absolute;
          left: 50%;
          top: 0;
          transform: translateX(-50%);
          width: 100%;
          text-align: center;
          font-size: 1.5em;
        }
      }

      /* Enhanced mobile touch interactions */
      @media (hover: none) and (pointer: coarse) {
        .countdown-box:active {
          transform: scale(0.95);
        }

        .ceremony-item:active {
          transform: translateX(8px) scale(0.98);
        }

        .family-side:active {
          transform: translateY(-4px) rotateY(1deg);
        }

        .embedded-map {
          height: 100px;
        }

        .ceremony-info {
          flex-direction: column;
          gap: 10px;
        }

        .map-container {
          width: 100%;
          margin-left: 0;
          margin-top: 10px;
        }

        .ceremony-text-content {
          min-width: auto;
        }
      }

      @media (max-width: 768px) {
        .invitation-container {
          margin: 0;
          border-radius: 0;
        }

        .family-info {
          grid-template-columns: 1fr;
          gap: 25px;
        }

        .main-title {
          font-size: 2.5em;
          margin: 30px 0 20px 0;
        }

        .couple-names {
          font-size: 2em;
          margin: 25px 0;
        }

        .countdown-timer {
          grid-template-columns: repeat(2, 1fr);
          gap: 15px;
          max-width: 280px;
          margin: 0 auto;
        }

        .countdown-item:nth-child(n + 3) {
          display: none;
        }

        /* Show days and hours on mobile */

        .countdown-box {
          padding: 15px 10px;
          min-width: 60px;
        }

        .countdown-number {
          font-size: 1.8em;
        }

        .countdown-label {
          font-size: 0.75em;
        }

        .countdown-number {
          font-size: 2.5em;
        }

        .countdown-number {
          font-size: 2.5em;
        }

        .content {
          padding: 25px;
        }

        .hero-section {
          min-height: 80vh;
          padding: 20px 15px;
        }

        .wedding-date {
          margin: 20px 0 25px 0;
        }

        .countdown-section {
          padding: 20px 15px;
        }

        .calendar-section {
          margin: 20px 0 0 0;
        }

        .weekdays {
          max-width: 100%;
          gap: 2px;
        }

        .calendar-days {
          max-width: 100%;
          gap: 2px;
        }

        .weekday {
          font-size: 0.7em;
          padding: 3px 1px;
        }

        .calendar-day {
          padding: 4px 1px;
          font-size: 0.75em;
          min-height: 24px;
        }

        .calendar-day.wedding-day {
          font-size: 0.8em;
        }

        .date-badge {
          top: 15px;
          right: 15px;
          z-index: 10;
          position: absolute;
        }

        .date-large {
          font-size: 1.8em;
        }

        .month-year {
          font-size: 0.7em;
        }

        .sticky-countdown {
          padding: 6px 16px;
          border-radius: 20px;
          top: -100px;
        }

        .sticky-countdown.show {
          top: 10px;
        }

        .sticky-countdown-content {
          gap: 8px;
        }

        .sticky-countdown-text {
          font-size: 0.8em;
        }

        .sticky-countdown-number {
          font-size: 1.1em;
          min-width: 25px;
        }

        .sticky-countdown-label {
          font-size: 0.7em;
        }

        .footer.fullscreen .footer-message {
          font-size: 2.5em;
          margin-bottom: 30px;
          color: rgba(255, 255, 255, 0.75);
        }

        .footer.fullscreen .footer-content {
          font-size: 1.2em;
          padding: 0 20px;
          color: rgba(255, 255, 255, 0.8);
        }

        .invitee-name {
          font-size: 2.6em;
          margin: 20px 0;
          line-height: 1.1;
          letter-spacing: 1px;
        }

        .footer.fullscreen .invitee-name {
          font-size: 3.4em;
          margin: 30px 0;
        }

        .back-to-top {
          width: 50px;
          height: 50px;
          bottom: 20px;
          right: 20px;
          font-size: 20px;
        }
      }

      /* Additional responsive tweaks (mobile-first adjustments) */
      @media (max-width: 1200px) {
        .invitation-container {
          max-width: 100%;
          padding: 0 12px;
        }

        .hero-section {
          padding: 18px 12px;
        }

        .hero-image-container {
          max-width: 420px;
        }
      }

      @media (max-width: 992px) {
        .family-info {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .photo-grid {
          grid-template-columns: repeat(2, 1fr);
        }

        .couple-photo {
          width: 220px;
          height: 300px;
        }
      }

      @media (max-width: 768px) {
        /* Make images and iframes fluid */
        img,
        .hero-main-image,
        .couple-photo,
        .person-avatar,
        .photo-item img {
          max-width: 100%;
          height: auto;
        }

        .hero-section {
          min-height: 60vh;
        }

        .countdown-timer {
          grid-template-columns: repeat(2, 1fr);
          gap: 12px;
          max-width: 320px;
        }

        .map-container {
          width: 100%;
          margin-left: 0;
        }

        .embedded-map {
          width: 100%;
          height: 160px;
        }

        .photo-grid {
          grid-template-columns: 1fr;
        }

        .section-title {
          font-size: 1.6em;
        }

        .hero-image-container {
          margin-top: 10px;
        }

        .back-to-top {
          width: 44px;
          height: 44px;
          font-size: 18px;
        }

        /* Reduce motion and heavy visuals on small devices */
        .petal,
        .floating-heart,
        .leaf,
        .heart-rain {
          display: none !important;
        }

        .gate-sparkle,
        .sparkleEffect {
          display: none !important;
        }

        /* Slightly smaller fonts for tight screens */
        .couple-names,
        .main-title {
          font-size: 1.6em;
        }
      }

      @media (max-width: 480px) {
        .hero-section {
          padding: 14px 10px;
          min-height: 52vh;
        }

        .hero-image-container {
          max-width: 100%;
          border-radius: 12px;
        }

        .invitee-name {
          font-size: 2.2em;
        }

        .footer-content {
          font-size: 1em;
        }

        .countdown-number {
          font-size: 2em;
        }
        .countdown-box {
          padding: 10px 8px;
        }

        /* Make any embedded iframe responsive */
        .map-container {
          padding: 0;
        }

        .embedded-map {
          height: 120px;
        }
      }

      /* Respect reduced motion preference globally: disable heavy transitions/animations */
      @media (prefers-reduced-motion: reduce) {
        * {
          transition: none !important;
          animation: none !important;
        }

        .hero-image-container:hover .hero-main-image,
        .photo-item:hover,
        .countdown-box:hover,
        .gate-control-btn:hover,
        .family-side:hover,
        .photo-item:hover img {
          transform: none !important;
          box-shadow: none !important;
        }
      }
    </style>
  </head>
  <body>
    <!-- Wedding Gate Animation -->
    <div class="wedding-gate-overlay" id="weddingGate">
      <div class="gate-container">
        <!-- Left Gate Door -->
        <div class="gate-door gate-door-left" id="gateLeft">
          <div class="gate-character gate-character-bb1"></div>
          <div class="gate-handle"></div>
        </div>

        <!-- Right Gate Door -->
        <div class="gate-door gate-door-right" id="gateRight">
          <div class="gate-character gate-character-dd1"></div>
          <div class="gate-handle"></div>
          <div class="gate-lock">
            <img alt="Gate Lock" class="gate-lock-img" src="img/lock.png" />
          </div>
        </div>
      </div>
    </div>

    <!-- Sticky Countdown -->
    <div class="sticky-countdown" id="stickyCountdown">
      <div class="sticky-countdown-content">
        <span class="sticky-countdown-text">C√≤n</span>
        <span class="sticky-countdown-number" id="stickyDays">0</span>
        <span class="sticky-countdown-label">ng√†y</span>
      </div>
    </div>

    <div class="invitation-container">
      <!-- Hero Section -->
      <div class="hero-section">
        <div class="hero-background"></div>
        <div class="date-badge">
          <span class="date-large" id="dateBadgeDay">29</span>
          <span class="month-year">12.2025</span>
        </div>

        <h1 class="main-title">Nh√† c√≥ h·ª∑</h1>
        <div aria-hidden="true" class="couple-hy">
          <img alt="Ho√†ng Uy√™n & Vi·∫øt ƒê√¥ng" src="img/hy.png" />
        </div>
        <div class="couple-names" id="coupleNames">
          <span class="name-left">Ho√†ng Uy√™n</span>
          <span class="ampersand">&</span>
          <span class="name-right">Vi·∫øt ƒê√¥ng</span>
        </div>
        <div class="wedding-date">Ch√∫ng t√¥i s·∫Øp k·∫øt h√¥n</div>

        <!-- Gate control button removed by request -->

        <!-- Hero Image -->
        <div class="hero-image-container">
          <img
            alt="·∫¢nh c∆∞·ªõi l√£ng m·∫°n c·ªßa c√¥ d√¢u Ho√†ng Uy√™n v√† ch√∫ r·ªÉ Vi·∫øt ƒê√¥ng"
            class="hero-main-image"
            loading="eager"
            src="img/045.JPG"
          />
          <div class="hero-image-overlay">
            <div class="hero-love-quote">
              "Y√™u l√† n·∫Øm tay, c√≤n ƒë∆∞·ªùng ƒë·ªùi ƒë·ªÉ m√¨nh lo chung."
            </div>
          </div>
        </div>
      </div>

      <div class="content">
        <!-- Countdown Timer Section -->
        <div
          aria-label="ƒê·∫øm ng∆∞·ª£c th·ªùi gian"
          class="countdown-section"
          role="region"
        >
          <div class="countdown-title">ƒê·∫øm ng∆∞·ª£c ƒë·∫øn ng√†y tr·ªçng ƒë·∫°i</div>
          <div
            aria-live="polite"
            class="countdown-timer"
            id="countdown"
            role="timer"
          >
            <div class="countdown-item">
              <div
                aria-label="Ng√†y c√≤n l·∫°i"
                class="countdown-box"
                role="button"
                tabindex="0"
              >
                <span aria-label="S·ªë ng√†y" class="countdown-number" id="days"
                  >00</span
                >
                <span class="countdown-label">Ng√†y</span>
              </div>
            </div>
            <div class="countdown-item">
              <div
                aria-label="Gi·ªù c√≤n l·∫°i"
                class="countdown-box"
                role="button"
                tabindex="0"
              >
                <span aria-label="S·ªë gi·ªù" class="countdown-number" id="hours"
                  >00</span
                >
                <span class="countdown-label">Gi·ªù</span>
              </div>
            </div>
            <div class="countdown-item">
              <div class="countdown-box">
                <span class="countdown-number" id="minutes">00</span>
                <span class="countdown-label">Ph√∫t</span>
              </div>
            </div>
            <div class="countdown-item">
              <div class="countdown-box">
                <span class="countdown-number" id="seconds">00</span>
                <span class="countdown-label">Gi√¢y</span>
              </div>
            </div>
          </div>

          <!-- Calendar Section -->
          <div class="calendar-section scroll-animate animate-from-bottom">
            <div class="calendar-title stagger-1">Ng√†y c∆∞·ªõi</div>
            <div class="calendar stagger-2">
              <div class="calendar-header">Th√°ng 12, 2025</div>
              <div class="calendar-body">
                <div class="weekdays">
                  <div class="weekday">CN</div>
                  <div class="weekday">T2</div>
                  <div class="weekday">T3</div>
                  <div class="weekday">T4</div>
                  <div class="weekday">T5</div>
                  <div class="weekday">T6</div>
                  <div class="weekday">T7</div>
                </div>
                <div class="calendar-days">
                  <!-- November days -->
                  <div class="calendar-day other-month">30</div>
                  <!-- December days -->
                  <div class="calendar-day current-month">1</div>
                  <div class="calendar-day current-month">2</div>
                  <div class="calendar-day current-month">3</div>
                  <div class="calendar-day current-month">4</div>
                  <div class="calendar-day current-month">5</div>
                  <div class="calendar-day current-month">6</div>

                  <div class="calendar-day current-month">7</div>
                  <div class="calendar-day current-month">8</div>
                  <div class="calendar-day current-month">9</div>
                  <div class="calendar-day current-month">10</div>
                  <div class="calendar-day current-month">11</div>
                  <div class="calendar-day current-month">12</div>
                  <div class="calendar-day current-month">13</div>

                  <div class="calendar-day current-month">14</div>
                  <div class="calendar-day current-month">15</div>
                  <div class="calendar-day current-month">16</div>
                  <div class="calendar-day current-month">17</div>
                  <div class="calendar-day current-month">18</div>
                  <div class="calendar-day current-month">19</div>
                  <div class="calendar-day current-month">20</div>

                  <div class="calendar-day current-month">21</div>
                  <div class="calendar-day current-month">22</div>
                  <div class="calendar-day current-month">23</div>
                  <div class="calendar-day current-month">24</div>
                  <div class="calendar-day current-month">25</div>
                  <div class="calendar-day current-month">26</div>
                  <div class="calendar-day current-month">27</div>

                  <div class="calendar-day current-month" id="calendarDay28">
                    28
                  </div>
                  <div class="calendar-day current-month" id="calendarDay29">
                    29
                  </div>
                  <div class="calendar-day current-month">30</div>
                  <div class="calendar-day current-month">31</div>
                  <!-- January days -->
                  <div class="calendar-day other-month">1</div>
                  <div class="calendar-day other-month">2</div>
                  <div class="calendar-day other-month">3</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Couple Photo Section -->
        <div class="couple-photo-section scroll-animate animate-from-left">
          <img
            alt="·∫¢nh c∆∞·ªõi l√£ng m·∫°n c·ªßa c√¥ d√¢u Ho√†ng Uy√™n v√† ch√∫ r·ªÉ Vi·∫øt ƒê√¥ng"
            class="couple-photo"
            loading="lazy"
            src="img/040.JPG"
          />
          <div class="love-quote">
            "T√¨nh y√™u kh√¥ng ch·ªâ l√† nh√¨n v√†o m·∫Øt nhau, m√† l√† c√πng nh√¨n v·ªÅ m·ªôt
            h∆∞·ªõng"
          </div>
        </div>

        <!-- Family Information -->
        <h2 class="section-title scroll-animate animate-from-bottom">
          Gia ƒë√¨nh ch√∫ng t√¥i
        </h2>
        <div class="family-info" id="familyInfoContainer">
          <div class="family-side scroll-animate animate-from-left stagger-1" id="familyGroom">
            <h3 class="family-title">‚ôÇ Nh√† Trai</h3>
            <div class="person-info">
              <img
                alt="·∫¢nh ch√¢n dung ch√∫ r·ªÉ Tr·∫ßn Vi·∫øt ƒê√¥ng"
                class="person-avatar"
                loading="lazy"
                src="img/groom.JPG"
              />
              <div class="person-name">Tr·∫ßn Vi·∫øt ƒê√¥ng</div>
            </div>
            <div class="person-info">
              <div class="person-detail">
                <strong>Th√¢n ph·ª•:</strong> Tr·∫ßn VƒÉn D∆∞∆°ng
              </div>
              <div class="person-detail">
                <strong>Th√¢n m·∫´u:</strong> Nguy·ªÖn Th·ªã Thanh
              </div>
            </div>
            <div class="address">
              üìç B·∫øn xe ƒêi·ªÅn Linh<br />T√¢n H√† L√¢m H√†, L√¢m ƒê·ªìng<br />
              <a
                class="map-link"
                href="https://maps.app.goo.gl/AAVkR1VWQNPDf8LA9"
                target="_blank"
                >Xem b·∫£n ƒë·ªì</a
              >
            </div>
          </div>

          <div class="family-side scroll-animate animate-from-right stagger-2" id="familyBride">
            <h3 class="family-title">‚ôÄ Nh√† G√°i</h3>
            <div class="person-info">
              <img
                alt="·∫¢nh ch√¢n dung c√¥ d√¢u V√µ Nguy·ªÖn Ho√†ng Uy√™n"
                class="person-avatar"
                loading="lazy"
                src="img/bride.JPG"
              />
              <div class="person-name">V√µ Nguy·ªÖn Ho√†ng Uy√™n</div>
            </div>
            <div class="person-info">
              <div class="person-detail">
                <strong>Th√¢n ph·ª•:</strong> V√µ Huy T√¢m
              </div>
              <div class="person-detail">
                <strong>Th√¢n m·∫´u:</strong> Nguy·ªÖn Th·ªã Kim Li√™n
              </div>
            </div>
            <div class="address">
              üìç 25 Huy·ªÅn Tr√¢n C√¥ng Ch√∫a<br />Ph∆∞·ªùng 4, ƒê√† L·∫°t, L√¢m ƒê·ªìng<br />
              <a
                class="map-link"
                href="https://maps.app.goo.gl/p4dQTXYQYy4Eq3eQ9"
                target="_blank"
                >Xem b·∫£n ƒë·ªì</a
              >
            </div>
          </div>
        </div>

        <!-- Wedding Photo Gallery -->
        <div class="photo-gallery-section scroll-animate animate-from-bottom">
          <h2 class="gallery-title">Album C∆∞·ªõi</h2>
          <div class="photo-grid">
            <div class="photo-item featured">
              <img
                alt="Trang tr√≠ ti·ªác c∆∞·ªõi truy·ªÅn th·ªëng v·ªõi s·∫Øc ƒë·ªè"
                loading="lazy"
                src="img/001.JPG"
              />
              <div class="photo-overlay">
                <span>ƒê·ªìng c·ªè xanh</span>
              </div>
              <div class="photo-caption">ƒê·ªìng c·ªè xanh</div>
            </div>

            <div class="photo-item">
              <img
                alt="Ti·ªác c∆∞·ªõi vui v·∫ª v·ªõi b·∫°n b√®"
                loading="lazy"
                src="img/2.jpg"
              />
              <div class="photo-overlay">
                <span>Kho·∫£nh kh·∫Øc vui v·∫ª</span>
              </div>
              <div class="photo-caption">Kho·∫£nh kh·∫Øc vui v·∫ª c√πng b·∫°n b√®</div>
            </div>

            <div class="photo-item">
              <img alt="L·ªÖ c∆∞·ªõi b√™n b·ªù bi·ªÉn" loading="lazy" src="img/046.JPG" />
              <div class="photo-overlay">
                <span>Coffee </span>
              </div>
              <div class="photo-caption">Coffee vibe</div>
            </div>

            <div class="photo-item">
              <img alt="·∫¢nh c∆∞·ªõi hi·ªán ƒë·∫°i" loading="lazy" src="img/002.JPG" />
              <div class="photo-overlay">
                <span>Forest</span>
              </div>
              <div class="photo-caption">Forest</div>
            </div>

            <div class="photo-item">
              <img
                alt="·∫¢nh c∆∞·ªõi ki·∫øn tr√∫c ƒë·ªôc ƒë√°o"
                loading="lazy"
                src="img/003.JPG"
              />
              <div class="photo-overlay">
                <span>ƒê√† L·∫°t vibe</span>
              </div>
              <div class="photo-caption">ƒê√† L·∫°t vibe</div>
            </div>

            <div class="photo-item">
              <img
                alt="Kho·∫£nh kh·∫Øc ng·ªçt ng√†o"
                loading="lazy"
                src="img/004.JPG"
              />
              <div class="photo-overlay">
                <span>Sweet moment</span>
              </div>
              <div class="photo-caption">Sweet moment</div>
            </div>

            <div class="photo-item">
              <img
                alt="·∫¢nh c∆∞·ªõi t·ª± nhi√™n"
                loading="lazy"
                src="img/010.JPG"
              />
              <div class="photo-overlay">
                <span>Natural love</span>
              </div>
              <div class="photo-caption">Natural love</div>
            </div>

            <div class="photo-item featured">
              <img
                alt="Kho·∫£nh kh·∫Øc l√£ng m·∫°n"
                loading="lazy"
                src="img/047.JPG"
              />
              <div class="photo-overlay">
                <span>Romantic moment</span>
              </div>
              <div class="photo-caption">Romantic moment</div>
            </div>
          </div>
        </div>

        <!-- TikTok Link Section -->
        <div class="social-links">
          <a class="tiktok-link" href="https://www.tiktok.com/@uynchuanbicochong" rel="noopener noreferrer" target="_blank">
            <img alt="TikTok" class="tiktok-icon" src="img/tiktok_icon.png">
            g·ª≠i l·ªùi ch√∫c v√† xem th√™m t·∫°i
          </a>
        </div>

        <!-- Wedding Ceremonies -->
        <div id="ceremoniesContainer"></div>

        <!-- <div class="ceremony-section scroll-animate animate-from-left">
          <h2 class="ceremony-title">üéä L·ªÖ T√¢n H√¥n</h2>
          <div class="ceremony-details">
            <div class="ceremony-item">
              <h4>üíç L·ªÖ T√¢n H√¥n</h4>
              <div class="ceremony-info">
                <div class="ceremony-text-content">
                  <div class="time-info">‚è∞ 10:00 - Th·ª© b·∫£y, 28/12/2025</div>
                  <div style="margin: 8px 0; color: #6c757d">
                    üìÖ Ng√†y 10 th√°ng 11 nƒÉm ·∫§t T·ªµ
                  </div>
                  <div class="location-info">
                    üìç B·∫øn xe ƒêi·ªÅn Linh, T√¢n H√† L√¢m H√†, L√¢m ƒê·ªìng
                    <a
                      class="ceremony-map-link"
                      href="https://maps.app.goo.gl/AAVkR1VWQNPDf8LA9"
                      target="_blank"
                      >B·∫£n ƒë·ªì</a
                    >
                  </div>
                </div>
                <div class="map-container">
                  <iframe
                    allowfullscreen=""
                    class="embedded-map"
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3906.2401379241533!2d108.20434709999999!3d11.7481258!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31715c9d10088e67%3A0xcce870d91e56e99e!2zVsSDbiBQaG_MgG5nIFhlIMSQaeG7gW4gTGluaCBUw6JuIEjDoA!5e0!3m2!1svi!2ssg!4v1760083424803!5m2!1svi!2ssg"
                  ></iframe>
                </div>
              </div>
            </div>

            <div class="ceremony-item">
              <h4>üçΩÔ∏è Ti·ªác M·ª´ng C∆∞·ªõi</h4>
              <div class="ceremony-info">
                <div class="ceremony-text-content">
                  <div class="time-info">‚è∞ 11:00 - Th·ª© b·∫£y, 28/12/2025</div>
                  <div style="margin: 8px 0; color: #6c757d">
                    üìÖ Ng√†y 10 th√°ng 11 nƒÉm ·∫§t T·ªµ
                  </div>
                  <div class="location-info">
                    üìç B·∫øn xe ƒêi·ªÅn Linh, T√¢n H√† L√¢m H√†, L√¢m ƒê·ªìng
                    <a
                      class="ceremony-map-link"
                      href="https://maps.app.goo.gl/AAVkR1VWQNPDf8LA9"
                      target="_blank"
                      >B·∫£n ƒë·ªì</a
                    >
                  </div>
                </div>
                <div class="map-container">
                  <iframe
                    allowfullscreen=""
                    class="embedded-map"
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3906.2401379241533!2d108.20434709999999!3d11.7481258!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31715c9d10088e67%3A0xcce870d91e56e99e!2zVsSDbiBQaG_MgG5nIFhlIMSQaeG7gW4gTGluaCBUw6JuIEjDoA!5e0!3m2!1svi!2ssg!4v1760083424803!5m2!1svi!2ssg"
                  ></iframe>
                </div>
              </div>
            </div>
          </div>
        </div> -->
      </div>

      <div class="footer">
        <div class="footer-message">Tr√¢n tr·ªçng k√≠nh m·ªùi</div>
        <div class="invitee-name" id="inviteeName" style="display: none"></div>
        <div class="footer-content">
          S·ª± hi·ªán di·ªán c·ªßa qu√Ω kh√°ch l√† ni·ªÅm vinh h·∫°nh cho gia ƒë√¨nh ch√∫ng t√¥i<br />
          <strong
            >C·∫£m ∆°n b·∫°n r·∫•t nhi·ªÅu v√¨ ƒë√£ g·ª≠i nh·ªØng l·ªùi ch√∫c m·ª´ng t·ªët ƒë·∫πp nh·∫•t ƒë·∫øn
            ƒë√°m c∆∞·ªõi c·ªßa ch√∫ng t√¥i!</strong
          >
        </div>
      </div>

      <!-- Back to Top Button -->
      <button
        aria-label="Tr·ªü v·ªÅ ƒë·∫ßu trang"
        class="back-to-top"
        id="backToTop"
        title="Tr·ªü v·ªÅ ƒë·∫ßu trang"
      >
        ‚Üë
      </button>
      <!-- Background audio (attempt autoplay) -->
      <audio
        id="backgroundAudio"
        loop
        playsinline
        preload="auto"
        src="music/leDuong.mp3"
      ></audio>

      <!-- audio element only; autoplay attempted programmatically -->
      <!-- no visible play button per request -->
      <!-- Small on-page audio debug badge (visible) -->
      <!-- Visible audio toggle button (top-left) -->
      <button
        aria-label="B·∫≠t/T·∫Øt nh·∫°c n·ªÅn"
        aria-pressed="false"
        class="audio-toggle-btn"
        id="audioToggleBtn"
        title="B·∫≠t/T·∫Øt nh·∫°c n·ªÅn"
      >
        ‚ñ∂
      </button>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Detect first user gesture (click/keydown) so we can enable certain APIs like vibrate or unmute
        window.userGestureDetected = false;
        function markUserGesture() {
          window.userGestureDetected = true;
          window.removeEventListener("click", markUserGesture);
          window.removeEventListener("keydown", markUserGesture);
        }
        window.addEventListener("click", markUserGesture, { once: true });
        window.addEventListener("keydown", markUserGesture, { once: true });
        // Prevent the browser from restoring scroll position on reload which can
        // cause a slight unwanted jump. If there's a hash anchor, allow normal behavior.
        try {
          if ("scrollRestoration" in history)
            history.scrollRestoration = "manual";
        } catch (e) {
          // ignore
        }

        if (!location.hash) {
          // Force to top immediately to avoid flicker from restored position
          window.scrollTo(0, 0);
        }

        // Background audio autoplay (best-effort, no visible button)
        const bgAudio = document.getElementById("backgroundAudio");

        function tryPlayUnmuted() {
          if (!bgAudio) return Promise.reject("no-audio");
          try {
            bgAudio.muted = false;
            bgAudio.volume = 0.75;
          } catch (e) {}
          return bgAudio.play();
        }

        function tryPlayMuted() {
          if (!bgAudio) return Promise.reject("no-audio");
          try {
            bgAudio.muted = true;
            bgAudio.volume = 0.5;
          } catch (e) {}
          return bgAudio.play();
        }

        // Audio is now controlled via the visible button. Do not attempt
        // automatic autoplay to avoid browser policy conflicts. Initialize
        // debug state and attach event listeners.
        if (bgAudio) {
          function setDebug(msg) {
            console.log(msg);
          }

          // Ensure audio starts paused/muted by default
          try {
            bgAudio.pause();
            bgAudio.muted = false;
            bgAudio.currentTime = 0;
          } catch (e) {}

          setDebug("paused");

          bgAudio.addEventListener("play", () => setDebug("playing"));
          bgAudio.addEventListener("pause", () => setDebug("paused"));
          bgAudio.addEventListener("ended", () => setDebug("ended"));
          bgAudio.addEventListener("canplaythrough", () =>
            setDebug("canplaythrough")
          );
          bgAudio.addEventListener("error", (e) => {
            console.error("Audio error", e);
            setDebug("error");
          });

          // Audio toggle button wiring (visible control in top-left)
          const audioToggleBtn = document.getElementById("audioToggleBtn");
          if (audioToggleBtn) {
            function updateButtonState() {
              if (!bgAudio) return;
              const isPlaying = !bgAudio.paused && !bgAudio.ended;
              audioToggleBtn.setAttribute(
                "aria-pressed",
                isPlaying ? "true" : "false"
              );
              audioToggleBtn.textContent = isPlaying ? "‚è∏" : "‚ñ∂";
            }

            audioToggleBtn.addEventListener("click", (e) => {
              e.preventDefault();
              if (!bgAudio) return;

              // If audio is paused, attempt to play unmuted (user interaction)
              if (bgAudio.paused) {
                try {
                  bgAudio.muted = false;
                  bgAudio.volume = 0.75;
                } catch (err) {}
                bgAudio.play().catch((err) => {
                  console.warn("Play from button failed:", err);
                  // fallback: try muted play
                  try {
                    bgAudio.muted = true;
                  } catch (e) {}
                  bgAudio.play().catch(() => {});
                });
              } else {
                bgAudio.pause();
              }

              // Mark that a user gesture occurred
              window.userGestureDetected = true;
              updateButtonState();
            });

            // Keep button in sync if audio changes state elsewhere
            bgAudio.addEventListener("play", updateButtonState);
            bgAudio.addEventListener("pause", updateButtonState);
            bgAudio.addEventListener("ended", updateButtonState);

            // Initialize button state
            updateButtonState();
          }

          // Also allow clicking anywhere on the invitation card to start audio
          const invitationContainerEl = document.querySelector(
            ".invitation-container"
          );
          if (invitationContainerEl) {
            invitationContainerEl.addEventListener(
              "click",
              function (ev) {
                // Ignore clicks on interactive elements so we don't steal intent
                const interactive =
                  ev.target.closest(
                    "button, a, input, textarea, select, label"
                  ) !== null;
                if (interactive) return;

                if (!bgAudio) return;

                if (bgAudio.paused) {
                  try {
                    bgAudio.muted = false;
                    bgAudio.volume = 0.75;
                  } catch (e) {}
                  bgAudio.play().catch(() => {
                    try {
                      bgAudio.muted = true;
                    } catch (e) {}
                    bgAudio.play().catch(() => {});
                  });
                }

                window.userGestureDetected = true;
                // Sync visual button if present
                if (audioToggleBtn) {
                  const isPlaying = !bgAudio.paused && !bgAudio.ended;
                  audioToggleBtn.setAttribute(
                    "aria-pressed",
                    isPlaying ? "true" : "false"
                  );
                  audioToggleBtn.textContent = isPlaying ? "‚è∏" : "‚ñ∂";
                }
              },
              { passive: true }
            );
          }
        }
        // Gate control variables
        let gateIsOpen = false;
        let gateAnimationTimeout;

        // Wedding Gate Animation
        function startWeddingGateAnimation() {
          const gateOverlay = document.getElementById("weddingGate");
          const gateLeft = document.getElementById("gateLeft");
          const gateRight = document.getElementById("gateRight");

          // Reset gate state
          gateIsOpen = false;
          gateLeft.classList.remove("sliding-left");
          gateRight.classList.remove("sliding-right");
          gateOverlay.classList.remove("hidden");
          gateOverlay.style.display = "block";
          gateOverlay.style.opacity = "1";
          gateOverlay.style.pointerEvents = "all";

          // Ensure invitation is completely hidden initially
          // const invitationContainer = document.querySelector('.invitation-container');
          // if (invitationContainer) {
          //     invitationContainer.classList.remove('visible');
          //     invitationContainer.style.opacity = '0';
          //     invitationContainer.style.visibility = 'hidden';
          //     invitationContainer.style.transform = 'scale(0.9)';
          //     invitationContainer.style.pointerEvents = 'none';
          // }
          //
          // Create sparkle effects
          function createGateSparkles() {
            for (let i = 0; i < 20; i++) {
              setTimeout(() => {
                const sparkle = document.createElement("div");
                sparkle.className = "gate-sparkle";
                sparkle.style.left = Math.random() * 100 + "%";
                sparkle.style.top = Math.random() * 100 + "%";
                sparkle.style.animationDelay = Math.random() * 1 + "s";
                gateOverlay.appendChild(sparkle);

                setTimeout(() => {
                  if (sparkle.parentNode) {
                    sparkle.parentNode.removeChild(sparkle);
                  }
                }, 2000);
              }, i * 100);
            }
          }

          // Add click to open functionality (in case user wants to skip)
          gateOverlay.style.cursor = "pointer";
          gateOverlay.style.pointerEvents = "all";

          const openGates = () => {
            gateLeft.classList.add("sliding-left");
            gateRight.classList.add("sliding-right");
            createGateSparkles();

            // Add vibration for mobile only after a user gesture was detected
            if (window.userGestureDetected && "vibrate" in navigator) {
              try {
                navigator.vibrate([100, 50, 100, 50, 200]);
              } catch (e) {}
            }

            gateOverlay.style.pointerEvents = "none";
          };

          // Auto-open after 1 second
          const autoOpenTimeout = setTimeout(openGates, 1000);

          // Allow user to click to open immediately
          gateOverlay.addEventListener(
            "click",
            () => {
              clearTimeout(autoOpenTimeout);
              openGates();
            },
            { once: true }
          );

          // Hide the gate overlay after animation
          gateAnimationTimeout = setTimeout(() => {
            gateOverlay.classList.add("hidden");
            gateOverlay.style.pointerEvents = "none";
            gateIsOpen = true;

            // Show invitation properly
            const invitationContainer = document.querySelector(
              ".invitation-container"
            );
            if (invitationContainer) {
              invitationContainer.classList.add("visible");
              invitationContainer.style.opacity = "1";
              invitationContainer.style.visibility = "visible";
              invitationContainer.style.transform = "scale(1)";
              invitationContainer.style.pointerEvents = "all";
              // Trigger entrance animation (only once)
              try {
                triggerInvitationEntrance(invitationContainer);
              } catch (e) {
                /* ignore if function missing */
              }
            }

            // Create final celebration sparkles
            setTimeout(() => {
              for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                  createSparkle(
                    Math.random() * window.innerWidth,
                    Math.random() * window.innerHeight
                  );
                }, i * 50);
              }
            }, 200);
          }, 4200); // Updated to match 4-second animation + small buffer
        }

        // Always show gate animation on page load/reload
        startWeddingGateAnimation();

        // Gate Control Button Functionality
        function setupGateControls() {
          const gateOverlay = document.getElementById("weddingGate");
          const gateLeft = document.getElementById("gateLeft");
          const gateRight = document.getElementById("gateRight");
          const invitationContainer = document.querySelector(
            ".invitation-container"
          );

          function closeGates() {
            gateIsOpen = false;
            gateOverlay.style.display = "block";
            gateOverlay.classList.remove("hidden");
            gateOverlay.style.opacity = "1";
            gateOverlay.style.pointerEvents = "all";

            // Reset gate doors to closed position
            gateLeft.classList.remove("sliding-left");
            gateRight.classList.remove("sliding-right");

            // // Hide invitation completely
            // invitationContainer.classList.remove('visible');
            // invitationContainer.style.opacity = '0';
            // invitationContainer.style.visibility = 'hidden';
            // invitationContainer.style.pointerEvents = 'none';
          }

          function openGates() {
            gateLeft.classList.add("sliding-left");
            gateRight.classList.add("sliding-right");

            setTimeout(() => {
              gateOverlay.classList.add("hidden");
              gateOverlay.style.pointerEvents = "none";
              gateIsOpen = true;

              // Show invitation properly
              invitationContainer.classList.add("visible");
              invitationContainer.style.opacity = "1";
              invitationContainer.style.visibility = "visible";
              invitationContainer.style.transform = "scale(1)";
              invitationContainer.style.pointerEvents = "all";
              // Trigger entrance animation (only once)
              try {
                triggerInvitationEntrance(invitationContainer);
              } catch (e) {
                /* ignore if function missing */
              }
            }, 2500);
          }

          const _gateControlBtn_early =
            document.getElementById("gateControlBtn");
          if (_gateControlBtn_early) {
            _gateControlBtn_early.addEventListener("click", function (e) {
              e.preventDefault();
              e.stopPropagation();

              console.log("Gate button clicked, current state:", gateIsOpen);

              if (gateIsOpen) {
                // Close gate
                closeGates();

                // Auto-open after 2 seconds
                clearTimeout(gateAnimationTimeout);
                gateAnimationTimeout = setTimeout(() => {
                  openGates();
                }, 2000);
              } else {
                // Open gate immediately
                clearTimeout(gateAnimationTimeout);
                openGates();
              }

              // Add vibration for mobile only after user gesture detected
              if (window.userGestureDetected && "vibrate" in navigator) {
                try {
                  navigator.vibrate(100);
                } catch (e) {}
              }
            });

            // Add keyboard support
            _gateControlBtn_early.addEventListener("keydown", function (e) {
              if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                this.click();
              }
            });
          }
        }

        // Setup the new gate control button
        function setupNewGateControl() {
          const gateControlBtn = document.getElementById("gateControlBtn");
          const gateOverlay = document.getElementById("weddingGate");
          const gateLeft = document.getElementById("gateLeft");
          const gateRight = document.getElementById("gateRight");
          const invitationContainer = document.querySelector(
            ".invitation-container"
          );
          let isGatesClosed = false;

          function closeGates() {
            isGatesClosed = true;
            gateOverlay.style.display = "block";
            gateOverlay.classList.remove("hidden");
            gateOverlay.style.opacity = "1";
            gateOverlay.style.pointerEvents = "all";

            gateLeft.classList.remove("sliding-left");
            gateRight.classList.remove("sliding-right");

            invitationContainer.style.opacity = "0";
            invitationContainer.style.visibility = "hidden";
            invitationContainer.style.transform = "scale(0.9)";
            invitationContainer.style.pointerEvents = "none";

            // Update button text (if button exists)
            if (gateControlBtn && gateControlBtn.querySelector) {
              const t = gateControlBtn.querySelector(".gate-text");
              if (t) t.textContent = "M·ªü c·ªïng";
            }
          }

          function openGates() {
            isGatesClosed = false;
            gateLeft.classList.add("sliding-left");
            gateRight.classList.add("sliding-right");

            setTimeout(() => {
              gateOverlay.classList.add("hidden");
              invitationContainer.style.opacity = "1";
              invitationContainer.style.visibility = "visible";
              invitationContainer.style.transform = "scale(1)";
              invitationContainer.style.pointerEvents = "all";
            }, 1000);

            // Update button text (if button exists)
            if (gateControlBtn && gateControlBtn.querySelector) {
              const t = gateControlBtn.querySelector(".gate-text");
              if (t) t.textContent = "ƒê√≥ng c·ªïng";
            }
          }

          if (gateControlBtn) {
            gateControlBtn.addEventListener("click", function () {
              if (isGatesClosed) {
                openGates();
              } else {
                closeGates();
              }

              // Add vibration for mobile only after user gesture detected
              if (window.userGestureDetected && "vibrate" in navigator) {
                try {
                  navigator.vibrate(100);
                } catch (e) {}
              }
            });

            // Add keyboard support
            gateControlBtn.addEventListener("keydown", function (e) {
              if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                this.click();
              }
            });
          }
        }

        // Initialize gate control
        setupNewGateControl();

        // Pre-decode hero image so it can fade/appear immediately when gate opens
        (function preloadHeroImage() {
          const img = document.querySelector(".hero-main-image");
          if (!img) return;

          // If decode() is supported, use it to ensure the browser has decoded the image
          if (img.decode) {
            img
              .decode()
              .then(() => {
                img.classList.add("decoded");
              })
              .catch(() => {
                // decode failed or aborted; still mark as decoded to avoid blocking
                img.classList.add("decoded");
              });
          } else {
            // Fallback: if already complete, mark, otherwise wait for load
            if (img.complete) img.classList.add("decoded");
            else
              img.addEventListener("load", () => img.classList.add("decoded"));
          }
        })();

        // Helper: trigger entrance animation for the invitation and stagger its children
        function triggerInvitationEntrance(invitationContainer) {
          if (!invitationContainer) return;

          // Avoid replaying if already animated
          if (invitationContainer.classList.contains("animated")) return;

          // Select meaningful children to stagger (order matters visually)
          // Only animate content above the calendar; calendar and below remain unaffected
          // Order matters: title first (from top), names (sides), date (from bottom), image (fade)
          const selectors = [
            ".main-title",
            "#coupleNames",
            ".wedding-date",
            ".hero-image-container",
            ".countdown-section",
            ".couple-photo-section",
          ];

          const nodes = [];
          selectors.forEach((s) => {
            const el = invitationContainer.querySelector(s);
            if (!el) return;

            // For couple names, stagger the individual name spans (left, ampersand, right)
            if (s === "#coupleNames") {
              const left = el.querySelector(".name-left");
              const amp = el.querySelector(".ampersand");
              const right = el.querySelector(".name-right");
              if (left) {
                left.classList.add("from-top"); // subtle additional motion
                nodes.push(left);
              }
              if (amp) nodes.push(amp);
              if (right) {
                right.classList.add("from-top");
                nodes.push(right);
              }
            } else {
              // mark title to come from top, date from bottom, image will fade
              if (s === ".main-title") el.classList.add("from-top");
              if (s === ".wedding-date") el.classList.add("from-bottom");
              if (s === ".hero-image-container") el.classList.add("fade-in");
              nodes.push(el);
            }
          });

          // Fallback: if no nodes found, just grab direct children of content
          if (nodes.length === 0) {
            invitationContainer
              .querySelectorAll(".content > *")
              .forEach((n) => nodes.push(n));
          }

          // Assign stagger classes with incremental delays
          nodes.forEach((el, i) => {
            el.classList.add("stagger-child");
            const delayClass = "stagger-delay-" + ((i % 4) + 1);
            el.classList.add(delayClass);
          });

          // Trigger the animation on the container immediately so image and text begin animating together
          setTimeout(() => invitationContainer.classList.add("animated"), 0);
        }

        // Enhanced photo gallery with proper loading and entrance animations
        function setupPhotoGallery() {
          const galleryImages = document.querySelectorAll(".photo-item img");
          const photoItems = document.querySelectorAll(".photo-item");

          // Make images visible and attach load/error handlers
          galleryImages.forEach((img, index) => {
            try {
              img.style.opacity = "1";
              img.style.display = "block";
            } catch (e) {}

            img.addEventListener("load", function () {
              try {
                this.style.opacity = "1";
                if (this.parentElement) this.parentElement.style.opacity = "1";
              } catch (e) {}
              console.log(`Image ${index + 1} loaded successfully:`, this.src);
            });

            img.addEventListener("error", function () {
              console.warn("Gallery image failed to load:", this.src);
              try {
                this.style.opacity = "0.6";
                this.style.backgroundColor = "#f0f0f0";
                if (this.parentElement)
                  this.parentElement.style.cursor = "default";
              } catch (e) {}
            });

            // If image appears not loaded, nudge a reload
            try {
              if (!img.complete || img.naturalHeight === 0) {
                const src = img.src;
                img.src = "";
                img.src = src;
              }
            } catch (e) {}
          });

          // If there are no photo items, show a placeholder and exit gracefully
          if (!photoItems || photoItems.length === 0) {
            const galleryContainer = document.querySelector(
              ".photo-gallery-section"
            );
            if (galleryContainer) {
              const ph = document.createElement("div");
              ph.className = "photo-placeholder";
              ph.style.padding = "40px";
              ph.style.textAlign = "center";
              ph.style.color = "#6c757d";
              ph.textContent =
                "·∫¢nh ƒëang ƒë∆∞·ª£c c·∫≠p nh·∫≠t. Vui l√≤ng ki·ªÉm tra l·∫°i sau.";
              galleryContainer.appendChild(ph);
            }
            console.log("No photo items found for gallery");
            return;
          }

          // Assign alternating entrance classes
          photoItems.forEach((item, idx) => {
            if (idx % 2 === 0) item.classList.add("from-left");
            else item.classList.add("from-right");
          });

          // IntersectionObserver to reveal items with a small stagger
          const obs = new IntersectionObserver(
            (entries, observer) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  const el = entry.target;
                  const idx = Array.prototype.indexOf.call(photoItems, el);
                  // slower stagger: 220ms steps makes the entrance feel more graceful
                  setTimeout(
                    () => el.classList.add("visible"),
                    (idx % 6) * 220
                  );
                  observer.unobserve(el);
                }
              });
            },
            { threshold: 0.18 }
          );

          photoItems.forEach((it) => obs.observe(it));

          // Interactions: click/hover/keyboard
          photoItems.forEach((item) => {
            item.style.cursor = "pointer";

            item.addEventListener("click", function () {
              const img = this.querySelector("img");
              if (img) {
                this.style.transform = "scale(1.1)";
                setTimeout(() => {
                  this.style.transform = "translateY(-10px) scale(1.05)";
                }, 200);

                for (let i = 0; i < 5; i++) {
                  setTimeout(() => {
                    createSparkle(
                      this.getBoundingClientRect().left +
                        Math.random() * this.offsetWidth,
                      this.getBoundingClientRect().top +
                        Math.random() * this.offsetHeight
                    );
                  }, i * 100);
                }

                if (window.userGestureDetected && "vibrate" in navigator) {
                  try {
                    navigator.vibrate(100);
                  } catch (e) {}
                }
              }
            });

            item.addEventListener("mouseenter", function () {
              for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                  createSparkle(
                    this.getBoundingClientRect().left +
                      Math.random() * this.offsetWidth,
                    this.getBoundingClientRect().top +
                      Math.random() * this.offsetHeight
                  );
                }, i * 200);
              }
            });

            item.setAttribute("tabindex", "0");
            item.addEventListener("keydown", function (e) {
              if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                this.click();
              }
            });
          });

          console.log(`Initialized gallery with ${photoItems.length} photos`);
        }

        // Initialize photo gallery
        setupPhotoGallery();

        // Render ceremony sections based on target_date parameter
        function renderCeremonySections() {
          const targetDate = getUrlParameter("target_date");
          const ceremoniesContainer = document.getElementById(
            "ceremoniesContainer"
          );

          if (!ceremoniesContainer) return;

          let ceremoniesHTML = "";

          if (targetDate === "28") {
            // Hi·ªÉn th·ªã Ti·ªác C∆∞·ªõi v√† L·ªÖ Vu Quy cho ng√†y 28
            ceremoniesHTML = `
              <div class="ceremony-section scroll-animate animate-from-right">
                <h2 class="ceremony-title">üéä TI·ªÜC C∆Ø·ªöI</h2>
                <div class="ceremony-item">
                  <div class="ceremony-info">
                    <div class="weekday-left">Ch·ªß Nh·∫≠t</div>
                    <div class="time-badge">
                      <div class="time">16 gi·ªù 30‚Ä≤</div>
                      <div class="day-number">28</div>
                      <div class="month">Th√°ng 12</div>
                    </div>
                    <div class="year-right">NƒÉm 2025</div>
                  </div>
                  <div class="lunar-note">( T·ª©c m·ªìng 9 th√°ng 11 nƒÉm ·∫§t T·ªµ )</div>

                  <div class="location-box">
                    <div class="location-title">T·∫†I: ANA MANDARA VILLAS DALAT RESORT</div>
                    <div class="location-address">L√™ Lai, Ph∆∞·ªùng 5, ƒê√† L·∫°t, L√¢m ƒê·ªìng</div>
                    <a class="cta-direction" href="https://maps.app.goo.gl/R4nCXxEaBJThVNQi6" target="_blank">XEM CH·ªà ƒê∆Ø·ªúNG</a>
                  </div>
                </div>
              </div>

              <div class="ceremony-section scroll-animate animate-from-left">
                <h2 class="ceremony-title">üå∏ L·ªÑ VU QUY</h2>
                <div class="ceremony-item">
                  <div class="ceremony-info">
                    <div class="weekday-left">TH·ª® 2</div>
                    <div class="time-badge">
                      <div class="time">07 gi·ªù 00‚Ä≤</div>
                      <div class="day-number">29</div>
                      <div class="month">Th√°ng 12</div>
                    </div>
                    <div class="year-right">NƒÉm 2025</div>
                  </div>
                  <div class="lunar-note">( T·ª©c m·ªìng 10 th√°ng 11 nƒÉm ·∫§t T·ªµ )</div>

                  <div class="location-box">
                    <div class="location-title">T·∫†I: T∆Ø GIA NH√Ä G√ÅI</div>
                    <div class="location-address">25 Huy·ªÅn Tr√¢n C√¥ng Ch√∫a, Ph∆∞·ªùng 4, ƒê√† L·∫°t, L√¢m ƒê·ªìng</div>
                    <a class="cta-direction" href="https://maps.app.goo.gl/p4dQTXYQYy4Eq3eQ9" target="_blank">XEM CH·ªà ƒê∆Ø·ªúNG</a>
                  </div>
                </div>
              </div>
            `;
          } else {
            // Hi·ªÉn th·ªã m·∫∑c ƒë·ªãnh (target_date = 29 ho·∫∑c kh√¥ng c√≥ param)
            ceremoniesHTML = `
              <div class="ceremony-section scroll-animate animate-from-right">
                <div class="ceremony-item">
                  <div class="ceremony-title-text">T·ªöI D·ª∞ B·ªÆA C∆†M TH√ÇN M·∫¨T C√ôNG GIA ƒê√åNH V√ÄO L√öC:</div>
                  <div class="ceremony-info">
                    <div class="weekday-left">Ch·ªß Nh·∫≠t</div>
                    <div class="time-badge">
                      <div class="time">17 gi·ªù 30‚Ä≤</div>
                      <div class="day-number">28</div>
                      <div class="month">Th√°ng 12</div>
                    </div>
                    <div class="year-right">NƒÉm 2025</div>
                  </div>
                  <div class="lunar-note">( T·ª©c m·ªìng 9 th√°ng 11 nƒÉm ·∫§t T·ªµ )</div>

                  <div class="location-box">
                    <div class="location-title">T·∫†I: T∆Ø GIA NH√Ä TRAI</div>
                    <div class="location-address">B·∫øn xe ƒêi·ªÅn Linh, T√¢n H√† L√¢m H√†, L√¢m ƒê·ªìng</div>
                    <a class="cta-direction" href="https://maps.app.goo.gl/AAVkR1VWQNPDf8LA9" target="_blank">XEM CH·ªà ƒê∆Ø·ªúNG</a>
                  </div>
                </div>
              </div>

              <div class="ceremony-section scroll-animate animate-from-left">
                <h2 class="ceremony-title">üë∞L·ªÑ TH√ÄNH H√îNü§µ</h2>
                <div class="ceremony-item">
                  <div class="ceremony-info">
                    <div class="weekday-left">Th·ª© Hai</div>
                    <div class="time-badge">
                      <div class="time">11 gi·ªù 30‚Ä≤</div>
                      <div class="day-number">29</div>
                      <div class="month">Th√°ng 12</div>
                    </div>
                    <div class="year-right">NƒÉm 2025</div>
                  </div>
                  <div class="lunar-note">( T·ª©c ng√†y 10 th√°ng 11 nƒÉm ·∫§t T·ªµ )</div>
                </div>
              </div>
            `;
          }

          ceremoniesContainer.innerHTML = ceremoniesHTML;
        }

        // Update date badge and calendar based on target_date
        function updateDateDisplay() {
          const targetDate = getUrlParameter("target_date");
          const dateBadgeDay = document.getElementById("dateBadgeDay");
          const calendarDay28 = document.getElementById("calendarDay28");
          const calendarDay29 = document.getElementById("calendarDay29");
          const familyInfoContainer = document.getElementById("familyInfoContainer");
          const familyGroom = document.getElementById("familyGroom");
          const familyBride = document.getElementById("familyBride");

          if (targetDate === "28") {
            // Hi·ªÉn th·ªã ng√†y 28 cho nh√† g√°i (khi c√≥ ?target_date=28)
            if (dateBadgeDay) dateBadgeDay.textContent = "28";
            if (calendarDay28) calendarDay28.classList.add("wedding-day");
            if (calendarDay29) calendarDay29.classList.remove("wedding-day");
            
            // ƒê∆∞a nh√† g√°i l√™n tr∆∞·ªõc
            if (familyInfoContainer && familyBride && familyGroom) {
              familyInfoContainer.insertBefore(familyBride, familyGroom);
            }
          } else {
            // Hi·ªÉn th·ªã ng√†y 29 cho nh√† trai (m·∫∑c ƒë·ªãnh)
            if (dateBadgeDay) dateBadgeDay.textContent = "29";
            if (calendarDay28) calendarDay28.classList.remove("wedding-day");
            if (calendarDay29) calendarDay29.classList.add("wedding-day");
            
            // Gi·ªØ nh√† trai ·ªü tr∆∞·ªõc (th·ª© t·ª± m·∫∑c ƒë·ªãnh trong HTML)
            if (familyInfoContainer && familyGroom && familyBride) {
              familyInfoContainer.insertBefore(familyGroom, familyBride);
            }
          }
        }

        // Handle invitee parameter
        function getUrlParameter(name) {
          name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
          const regex = new RegExp("[\\?&]" + name + "=([^&#]*)");
          const results = regex.exec(location.search);
          return results === null
            ? ""
            : decodeURIComponent(results[1].replace(/\+/g, " "));
        }

        // Render ceremony sections first
        renderCeremonySections();

        // Update date badge and calendar
        updateDateDisplay();

        const inviteeName = getUrlParameter("invitee");
        if (inviteeName) {
          const inviteeElement = document.getElementById("inviteeName");
          inviteeElement.textContent = inviteeName;
          inviteeElement.style.display = "block";
        }
        // Countdown Timer
        function updateCountdown() {
          const targetDate = getUrlParameter("target_date");
          const weddingDateStr =
            targetDate === "28" ? "2025-12-28T10:00:00" : "2025-12-29T10:00:00";
          const weddingDate = new Date(weddingDateStr);
          const now = new Date();
          const timeDiff = weddingDate - now;

          if (timeDiff > 0) {
            const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            const hours = Math.floor(
              (timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
            );
            const minutes = Math.floor(
              (timeDiff % (1000 * 60 * 60)) / (1000 * 60)
            );
            const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);

            // Update main countdown
            document.getElementById("days").textContent = days
              .toString()
              .padStart(2, "0");
            document.getElementById("hours").textContent = hours
              .toString()
              .padStart(2, "0");
            document.getElementById("minutes").textContent = minutes
              .toString()
              .padStart(2, "0");
            document.getElementById("seconds").textContent = seconds
              .toString()
              .padStart(2, "0");

            // Update sticky countdown
            document.getElementById("stickyDays").textContent = days;
          } else {
            document.getElementById("days").textContent = "00";
            document.getElementById("hours").textContent = "00";
            document.getElementById("minutes").textContent = "00";
            document.getElementById("seconds").textContent = "00";
            document.getElementById("stickyDays").textContent = "0";
          }
        }

        // Update countdown every second
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Sticky countdown scroll handler
        const stickyCountdown = document.getElementById("stickyCountdown");
        const heroSection = document.querySelector(".hero-section");

        function handleScroll() {
          const heroBottom = heroSection.offsetTop + heroSection.offsetHeight;
          const scrollTop =
            window.pageYOffset || document.documentElement.scrollTop;

          if (scrollTop > heroBottom - 100) {
            stickyCountdown.classList.add("show");
          } else {
            stickyCountdown.classList.remove("show");
          }
        }

        window.addEventListener("scroll", handleScroll);

        // Initial check
        handleScroll();

        // Footer fullscreen when near bottom with fixed offset and cooldown
        const footer = document.querySelector(".footer");
        let isFooterExpanded = false;
        let footerTimeout;
        let lastStateChange = 0;
        let expansionTimeout;

        function handleFooterExpansion() {
          clearTimeout(footerTimeout);

          footerTimeout = setTimeout(() => {
            const now = Date.now();
            const scrollTop =
              window.pageYOffset || document.documentElement.scrollTop;
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight;

            // Use fixed 50px offset from bottom instead of changing thresholds
            const nearBottom = scrollTop + windowHeight >= documentHeight - 50;

            if (nearBottom && !isFooterExpanded) {
              footer.classList.add("fullscreen");
              isFooterExpanded = true;
              lastStateChange = now;

              // Show back to top button
              const backToTopBtn = document.getElementById("backToTop");
              setTimeout(() => {
                backToTopBtn.classList.add("show");
              }, 800); // Show after footer expansion animation

              // Scroll to the very end after footer expansion
              setTimeout(() => {
                window.scrollTo({
                  top: document.documentElement.scrollHeight,
                  behavior: "smooth",
                });
              }, 200); // Small delay to allow CSS transition to start
            } else if (!nearBottom && isFooterExpanded) {
              // Only allow contraction after 1 second cooldown
              const cooldownPeriod = 1000; // 1 second
              const timeSinceExpansion = now - lastStateChange;

              if (timeSinceExpansion >= cooldownPeriod) {
                // Only contract if user scrolled significantly up (200px buffer for more stability)
                const farFromTrigger =
                  scrollTop + windowHeight < documentHeight - 200;
                if (farFromTrigger) {
                  footer.classList.remove("fullscreen");
                  isFooterExpanded = false;
                  lastStateChange = now;

                  // Hide back to top button
                  const backToTopBtn = document.getElementById("backToTop");
                  backToTopBtn.classList.remove("show");
                }
              } else {
                // Schedule a check after cooldown period is over
                clearTimeout(expansionTimeout);
                expansionTimeout = setTimeout(() => {
                  handleFooterExpansion();
                }, cooldownPeriod - timeSinceExpansion);
              }
            }
          }, 100);
        }

        // Use scroll events with throttling for precise control
        let lastFooterCheck = 0;
        function throttledFooterCheck() {
          const now = Date.now();
          if (now - lastFooterCheck > 50) {
            handleFooterExpansion();
            lastFooterCheck = now;
          }
        }

        window.addEventListener("scroll", throttledFooterCheck, {
          passive: true,
        });

        // Back to top button functionality with keyboard support
        const backToTopBtn = document.getElementById("backToTop");
        function scrollToTop() {
          // Hide the button immediately
          backToTopBtn.classList.remove("show");

          // Contract footer
          footer.classList.remove("fullscreen");
          isFooterExpanded = false;
          lastStateChange = Date.now();

          // Smooth scroll to top
          window.scrollTo({
            top: 0,
            behavior: "smooth",
          });
        }

        backToTopBtn.addEventListener("click", scrollToTop);
        backToTopBtn.addEventListener("keydown", function (e) {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            scrollToTop();
          }
        });

        // Intersection Observer for scroll animations with scroll-direction support
        const scrollObserverOptions = {
          threshold: 0.15,
          rootMargin: "0px 0px -80px 0px",
        };

        // Track last scroll position to determine direction
        let lastScrollY =
          window.pageYOffset || document.documentElement.scrollTop;
        let scrollDirection = "down"; // 'down' or 'up'

        window.addEventListener(
          "scroll",
          () => {
            const currentY =
              window.pageYOffset || document.documentElement.scrollTop;
            if (currentY > lastScrollY + 2) {
              scrollDirection = "down";
            } else if (currentY < lastScrollY - 2) {
              scrollDirection = "up";
            }
            lastScrollY = currentY;
          },
          { passive: true }
        );

        const scrollObserver = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            const el = entry.target;

            if (entry.isIntersecting) {
              // Remove previous direction classes then add the current one
              el.classList.remove("animate-up", "animate-down");

              if (scrollDirection === "down") {
                el.classList.add("animate-down");
              } else {
                el.classList.add("animate-up");
              }

              // Force a reflow so the transition runs reliably in some browsers
              // (reading offsetHeight forces reflow)
              void el.offsetHeight;

              // Mark visible (this will transition transform -> translate(0) and opacity)
              el.classList.add("visible");
            } else {
              // Optionally remove visible so animation can replay when leaving/re-entering
              // but keep the directional initial class so the next enter animates from correct side
              el.classList.remove("visible");
            }
          });
        }, scrollObserverOptions);

        // Observe all scroll-animate elements
        document.querySelectorAll(".scroll-animate").forEach((el) => {
          // set initial directional class based on current scroll position
          el.classList.add(lastScrollY > 0 ? "animate-down" : "animate-up");
          scrollObserver.observe(el);
        });

        // Enhanced petal creation with performance optimization
        function createPetal() {
          // Limit active petals for performance
          const activePetals = document.querySelectorAll(".petal").length;
          if (activePetals > 15) return;

          const petal = document.createElement("div");
          petal.className = "petal";
          petal.style.left = Math.random() * 100 + "vw";
          petal.style.animationDuration = Math.random() * 4 + 3 + "s";
          petal.style.opacity = Math.random() * 0.8 + 0.2;
          petal.style.transform = "scale(" + (Math.random() * 0.8 + 0.6) + ")";

          // Add random colors
          const colors = ["#ffb6c1", "#ffc0cb", "#ff91a4", "#ffb3ba"];
          const color = colors[Math.floor(Math.random() * colors.length)];
          petal.style.background = `linear-gradient(45deg, ${color}, #ffc0cb)`;

          document.body.appendChild(petal);

          setTimeout(() => {
            if (petal.parentNode) {
              petal.parentNode.removeChild(petal);
            }
          }, 7000);
        }

        // Create floating hearts
        function createFloatingHeart() {
          const heart = document.createElement("div");
          heart.className = "floating-heart";
          heart.innerHTML = "‚ô•";
          heart.style.left = Math.random() * 100 + "vw";
          heart.style.animationDuration = Math.random() * 5 + 8 + "s";
          heart.style.fontSize = Math.random() * 10 + 15 + "px";
          document.body.appendChild(heart);

          setTimeout(() => {
            if (heart.parentNode) {
              heart.parentNode.removeChild(heart);
            }
          }, 13000);
        }

        // Create falling leaves
        function createLeaf() {
          const leaf = document.createElement("div");
          leaf.className = "leaf";
          leaf.style.left = Math.random() * 100 + "vw";
          leaf.style.animationDuration = Math.random() * 6 + 4 + "s";
          leaf.style.animationDelay = "0s"; // Start immediately

          // Random leaf variations
          const leafTypes = [
            "linear-gradient(45deg, #228B22, #32CD32, #90EE90)",
            "linear-gradient(45deg, #8FBC8F, #98FB98, #F0FFF0)",
            "linear-gradient(45deg, #2E8B57, #3CB371, #20B2AA)",
            "linear-gradient(45deg, #006400, #008000, #32CD32)",
          ];

          leaf.style.background =
            leafTypes[Math.floor(Math.random() * leafTypes.length)];
          leaf.style.transform = "scale(" + (Math.random() * 0.6 + 0.7) + ")";

          document.body.appendChild(leaf);

          setTimeout(() => {
            if (leaf.parentNode) {
              leaf.parentNode.removeChild(leaf);
            }
          }, 10000);
        }

        // Sparkle effect on click
        function createSparkle(x, y) {
          const sparkle = document.createElement("div");
          sparkle.style.position = "fixed";
          sparkle.style.left = x + "px";
          sparkle.style.top = y + "px";
          sparkle.style.width = "6px";
          sparkle.style.height = "6px";
          sparkle.style.background = "linear-gradient(45deg, #ffd700, #ffed4e)";
          sparkle.style.borderRadius = "50%";
          sparkle.style.pointerEvents = "none";
          sparkle.style.zIndex = "1000";
          sparkle.style.animation = "sparkleEffect 1.2s ease-out forwards";
          document.body.appendChild(sparkle);

          setTimeout(() => {
            if (sparkle.parentNode) {
              sparkle.parentNode.removeChild(sparkle);
            }
          }, 1200);
        }

        // Add sparkle animation
        const sparkleStyle = document.createElement("style");
        sparkleStyle.textContent = `
                @keyframes sparkleEffect {
                    0% {
                        transform: scale(0) rotate(0deg);
                        opacity: 1;
                    }
                    50% {
                        transform: scale(1.5) rotate(180deg);
                        opacity: 1;
                    }
                    100% {
                        transform: scale(0) rotate(360deg);
                        opacity: 0;
                    }
                }
            `;
        document.head.appendChild(sparkleStyle);

        // Enhanced click sparkle effect with sound simulation
        document.addEventListener("click", function (e) {
          // Skip if clicking on interactive elements
          if (e.target.closest("a, button, .countdown-box, .ceremony-item")) {
            return;
          }

          for (let i = 0; i < 8; i++) {
            setTimeout(() => {
              createSparkle(
                e.clientX + (Math.random() - 0.5) * 60,
                e.clientY + (Math.random() - 0.5) * 60
              );
            }, i * 80);
          }

          // Create a gentle vibration effect on mobile only after a user gesture
          if (window.userGestureDetected && "vibrate" in navigator) {
            try {
              navigator.vibrate(50);
            } catch (e) {}
          }
        });

        // Start animations immediately
        createLeaf(); // Create first leaf immediately
        createPetal(); // Create first petal immediately

        setInterval(createPetal, 1200);
        setInterval(createFloatingHeart, 4000);
        setInterval(createLeaf, 1500);

        // Random heart rain - triggers every 15-45 seconds
        function scheduleRandomHeartRain() {
          const randomDelay = 15000 + Math.random() * 30000; // 15-45 seconds
          setTimeout(() => {
            createHeartRain();
            scheduleRandomHeartRain(); // Schedule the next one
          }, randomDelay);
        }

        // Start the random heart rain after initial delay
        setTimeout(() => {
          scheduleRandomHeartRain();
        }, 10000); // Wait 10 seconds before first heart rain

        // Heart Rain Function
        function createHeartRain() {
          const heartRainContainer = document.createElement("div");
          heartRainContainer.className = "heart-rain";
          document.body.appendChild(heartRainContainer);

          // Create multiple hearts
          const heartCount = 30;
          const heartSymbols = ["‚ô•", "‚ô•", "‚ô•"];

          for (let i = 0; i < heartCount; i++) {
            setTimeout(() => {
              const heart = document.createElement("div");
              heart.className = "falling-heart";

              // Random heart symbol
              heart.textContent =
                heartSymbols[Math.floor(Math.random() * heartSymbols.length)];

              // Random position across screen width
              heart.style.left = Math.random() * 100 + "vw";

              // Random size class
              const sizeClasses = ["small", "large", "gold"];
              if (Math.random() < 0.3) {
                heart.classList.add(
                  sizeClasses[Math.floor(Math.random() * sizeClasses.length)]
                );
              }

              // Random animation duration (2-4 seconds)
              const duration = 2 + Math.random() * 2;
              heart.style.animationDuration = duration + "s";

              // Add slight horizontal sway
              if (Math.random() < 0.5) {
                heart.style.animationName = "heartFall, heartSway";
                heart.style.animationDuration = duration + "s, 1s";
                heart.style.animationIterationCount = "1, infinite";
              }

              heartRainContainer.appendChild(heart);

              // Remove heart after animation
              setTimeout(() => {
                if (heart.parentNode) {
                  heart.parentNode.removeChild(heart);
                }
              }, duration * 1000 + 500);
            }, i * 100); // Stagger heart creation
          }

          // Remove container after all hearts are done
          setTimeout(() => {
            if (heartRainContainer.parentNode) {
              heartRainContainer.parentNode.removeChild(heartRainContainer);
            }
          }, 5000);
        }

        // Continuous gentle heart fall (always-on)
        let continuousHeartInterval;
        let continuousHeartsEnabled = true; // toggle to enable/disable continuous hearts

        function spawnContinuousHeart() {
          // Limit active falling hearts for performance
          const active = document.querySelectorAll(".falling-heart").length;
          if (active > 40) return; // don't spawn more if many already

          const heart = document.createElement("div");
          heart.className = "falling-heart";
          const heartSymbols = ["‚ô•", "‚ô•", "‚ô•"];
          heart.textContent =
            heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
          heart.style.left = Math.random() * 100 + "vw";
          // random size
          if (Math.random() < 0.25) heart.classList.add("large");
          if (Math.random() < 0.08) heart.classList.add("gold");

          const duration = 4 + Math.random() * 4; // slower gentle fall
          heart.style.animationDuration = duration + "s";

          // Add small horizontal sway sometimes
          if (Math.random() < 0.6) {
            heart.style.animationName = "heartFall, heartSway";
            heart.style.animationDuration =
              duration + "s, " + (2 + Math.random() * 2) + "s";
            heart.style.animationIterationCount = "1, infinite";
          }

          // Append to a persistent container to avoid creating/removing many containers
          let container = document.querySelector(".heart-rain");
          if (!container) {
            container = document.createElement("div");
            container.className = "heart-rain";
            document.body.appendChild(container);
          }

          container.appendChild(heart);

          // Remove after animation
          setTimeout(() => {
            if (heart.parentNode) heart.parentNode.removeChild(heart);
          }, duration * 1000 + 500);
        }

        function startContinuousHearts() {
          if (continuousHeartInterval) return;
          continuousHeartsEnabled = true;
          spawnContinuousHeart();
          continuousHeartInterval = setInterval(() => {
            if (continuousHeartsEnabled) spawnContinuousHeart();
          }, 700); // spawn roughly every 0.7s
        }

        function stopContinuousHearts() {
          continuousHeartsEnabled = false;
          if (continuousHeartInterval) {
            clearInterval(continuousHeartInterval);
            continuousHeartInterval = null;
          }
        }

        // Start continuous hearts by default
        startContinuousHearts();

        // Continuous typewriter effect for couple names
        let typewriterRunning = false;
        let typewriterTimeout;

        function continuousTypeWriter(element, text, typeSpeed, pauseTime) {
          if (window.innerWidth <= 500 || typewriterRunning) return; // Don't run on mobile or if already running

          typewriterRunning = true;

          function runAnimation() {
            if (window.innerWidth <= 500) {
              typewriterRunning = false;
              return; // Stop if switched to mobile
            }

            element.innerHTML = "";
            let i = 0;

            function type() {
              if (window.innerWidth <= 500) {
                typewriterRunning = false;
                return; // Stop if switched to mobile during typing
              }

              if (i < text.length) {
                element.innerHTML += text.charAt(i);
                i++;
                typewriterTimeout = setTimeout(type, typeSpeed);
              } else {
                // Pause when complete, then restart
                typewriterTimeout = setTimeout(() => {
                  if (window.innerWidth <= 500) {
                    typewriterRunning = false;
                    return;
                  }
                  // Add blinking cursor effect
                  element.innerHTML =
                    text +
                    '<span style="animation: blink 1s infinite;">|</span>';
                  typewriterTimeout = setTimeout(() => {
                    if (window.innerWidth > 500) {
                      runAnimation(); // Restart the animation
                    } else {
                      typewriterRunning = false;
                    }
                  }, pauseTime);
                }, 1000);
              }
            }
            type();
          }
          runAnimation();
        }

        function stopTypewriter() {
          typewriterRunning = false;
          if (typewriterTimeout) {
            clearTimeout(typewriterTimeout);
          }
        }

        // Add blinking cursor animation
        const cursorStyle = document.createElement("style");
        cursorStyle.textContent = `
                @keyframes blink {
                    0%, 50% { opacity: 1; }
                    51%, 100% { opacity: 0; }
                }
            `;
        document.head.appendChild(cursorStyle);

        // Function to handle mobile/desktop layout switching
        function handleCoupleNamesLayout() {
          const coupleNames = document.getElementById("coupleNames");
          if (!coupleNames) return;
          // For both mobile and desktop, ensure the span-based layout remains intact
          // and stop any legacy typewriter behavior. Entrance animation will be
          // handled by triggerInvitationEntrance (names slide in from sides).
          stopTypewriter();
          coupleNames.classList.remove("mobile-layout");
          // Make sure spans are visible on small screens without animation
          if (window.innerWidth <= 500) {
            const left = coupleNames.querySelector(".name-left");
            const amp = coupleNames.querySelector(".ampersand");
            const right = coupleNames.querySelector(".name-right");
            if (left) left.style.opacity = 1;
            if (amp) amp.style.opacity = 1;
            if (right) right.style.opacity = 1;
          }
        }

        // Apply layout on load
        setTimeout(() => {
          handleCoupleNamesLayout();
        }, 2000);

        // Handle window resize
        window.addEventListener("resize", function () {
          clearTimeout(window.resizeTimeout);
          window.resizeTimeout = setTimeout(handleCoupleNamesLayout, 300);
        });

        // Smooth scroll for scroll indicator with keyboard support (guarded)
        const scrollIndicator = document.querySelector(".scroll-indicator");
        if (scrollIndicator) {
          scrollIndicator.addEventListener("click", function () {
            const content = document.querySelector(".content");
            if (content) content.scrollIntoView({ behavior: "smooth" });
          });

          scrollIndicator.addEventListener("keydown", function (e) {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              this.click();
            }
          });
        }

        // Enhanced ceremony items with better interactions
        document.querySelectorAll(".ceremony-item").forEach((item, index) => {
          item.style.animationDelay = index * 0.3 + "s";

          item.addEventListener("mouseenter", function () {
            this.style.transform = "translateX(15px) scale(1.02)";
          });

          item.addEventListener("mouseleave", function () {
            this.style.transform = "translateX(0) scale(1)";
          });

          // Add click to copy location functionality
          const mapLink = item.querySelector(".ceremony-map-link");
          if (mapLink) {
            mapLink.addEventListener("click", function (e) {
              e.preventDefault();
              const url = this.href;

              // Try to copy to clipboard
              if (navigator.clipboard) {
                navigator.clipboard.writeText(url).then(() => {
                  // Show brief feedback
                  const originalText = this.textContent;
                  this.textContent = "ƒê√£ sao ch√©p!";
                  setTimeout(() => {
                    this.textContent = originalText;
                  }, 1500);
                });
              } else {
                // Fallback: open link
                window.open(url, "_blank");
              }
            });
          }
        });

        // Add countdown box interactions with keyboard support
        document.querySelectorAll(".countdown-box").forEach((box) => {
          function celebrateCountdown() {
            // Add pulse effect
            this.style.animation = "none";
            setTimeout(() => {
              this.style.animation = "countdownPulse 4s ease-in-out infinite";
            }, 10);

            // Create mini celebration
            for (let i = 0; i < 3; i++) {
              setTimeout(() => {
                createSparkle(
                  this.getBoundingClientRect().left +
                    this.offsetWidth / 2 +
                    (Math.random() - 0.5) * 40,
                  this.getBoundingClientRect().top +
                    this.offsetHeight / 2 +
                    (Math.random() - 0.5) * 40
                );
              }, i * 150);
            }
          }

          box.addEventListener("click", celebrateCountdown);
          box.addEventListener("keydown", function (e) {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              celebrateCountdown.call(this);
            }
          });
        });

        // Add photo gallery functionality
        const couplePhoto = document.querySelector(".couple-photo");
        if (couplePhoto) {
          couplePhoto.addEventListener("click", function () {
            // Create fullscreen overlay
            const overlay = document.createElement("div");
            overlay.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0, 0, 0, 0.9);
                        z-index: 10000;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        cursor: pointer;
                        opacity: 0;
                        transition: opacity 0.3s ease;
                    `;

            const img = document.createElement("img");
            img.src = this.src;
            img.style.cssText = `
                        max-width: 90%;
                        max-height: 90%;
                        border-radius: 15px;
                        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
                        transform: scale(0.8);
                        transition: transform 0.3s ease;
                    `;

            overlay.appendChild(img);
            document.body.appendChild(overlay);

            // Animate in
            setTimeout(() => {
              overlay.style.opacity = "1";
              img.style.transform = "scale(1)";
            }, 10);

            // Close on click
            overlay.addEventListener("click", function () {
              this.style.opacity = "0";
              img.style.transform = "scale(0.8)";
              setTimeout(() => {
                document.body.removeChild(this);
              }, 300);
            });

            // Close on escape key
            const handleEscape = (e) => {
              if (e.key === "Escape") {
                overlay.click();
                document.removeEventListener("keydown", handleEscape);
              }
            };
            document.addEventListener("keydown", handleEscape);
          });
        }
      });
    </script>
  </body>
</html>
